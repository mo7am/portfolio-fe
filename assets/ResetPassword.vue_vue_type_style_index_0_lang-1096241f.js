import{d as $,I as j,m as E,J as M,bm as z,r as i,a as K,o as _,c as H,e as t,b as a,k as s,G as g,y as f,f as r,$ as x,Q as p,R as w,W as U,ci as W,h as D,V as G,cR as C}from"./index-ab2bc521.js";import{r as L,p as J,c as O}from"./validators-6509741b.js";import{_ as Q}from"./AppTextField.vue_vue_type_style_index_0_lang-ff2427f7.js";import{_ as X}from"./LoadingIcon.vue_vue_type_script_setup_true_lang-2352b216.js";import{a as Y,b as Z}from"./auth-v1-top-shape-c5f58476.js";import{V as y}from"./VNodeRenderer-ca9ffdcc.js";import{a as ee,V as se}from"./VCard-c9d7cfad.js";import{V as ae}from"./VCardText-6d82c75f.js";import{b as oe}from"./VTextField-bc742ce7.js";import{V as te}from"./VForm-bdbb87d6.js";const ne={class:"auth-wrapper d-flex align-center justify-center pa-4"},re={class:"position-relative my-sm-16"},ie={class:"flex w-[170px] h-[45px]"},le={class:"text-h4 mb-1"},de={class:"text-capitalize"},pe=t("p",{class:"mb-0"},"Please enter new password to reset it.",-1),ce={class:"px-4 py-0"},me={class:"fw-medium ml-2"},ue={class:"flex flex-col gap-4"},fe={class:"text-center flex justify-center text-base"},Ce=$({__name:"ResetPassword",props:{isAdmin:{type:Boolean}},setup(P){const I=P,h=j(),v=E(),B=M("api"),n=z({token:v.query.token,email:v.query.email,password:"",password_confirmation:""}),V=i(),k=i(!1),b=i(!1),c=i(!1),m=i(!1),u=i(!1),R="PPS-POS";document.title=R+" | Reset Password";const T=async()=>{var e,o;if((o=await((e=V.value)==null?void 0:e.validate()))!=null&&o.valid){c.value=!0;try{await B.auth.resetPassword(n),C.fire({icon:"success",padding:"10px",background:"#fff",html:'<span style="font-size:14px">Password reset successfully</span>'}),I.isAdmin?h.push("/admin/login"):h.push("/login")}catch(l){l.response.status==400&&C.fire({icon:"success",padding:"10px",background:"#fff",html:`<span style="font-size:14px">${l.response.data.email}</span>`})}c.value=!1}},A=async e=>{k.value=e.getModifierState("CapsLock")},F=async()=>{if(n.password==""){var e=document.getElementById("passwordId");e&&(e.style.marginTop="-10px")}else{var e=document.getElementById("passwordId");e&&(e.style.marginTop="-16px")}},S=async e=>{b.value=e.getModifierState("CapsLock")},q=async()=>{if(n.password==""){var e=document.getElementById("confirmId");e&&(e.style.marginTop="-10px")}else{var e=document.getElementById("confirmId");e&&(e.style.marginTop="0px")}};return(e,o)=>{const l=Q,N=K("RouterLink");return _(),H("div",ne,[t("div",re,[a(s(y),{nodes:("h"in e?e.h:s(g))("div",{innerHTML:s(Y)}),class:f(["auth-v1-top-shape d-none d-sm-block",e.isAdmin?"text-black":"text-primary"])},null,8,["nodes","class"]),a(s(y),{nodes:("h"in e?e.h:s(g))("div",{innerHTML:s(Z)}),class:f(["auth-v1-bottom-shape d-none d-sm-block",e.isAdmin?"text-black":"text-primary"])},null,8,["nodes","class"]),a(se,{class:"auth-card pa-4","max-width":"448"},{default:r(()=>[a(ee,{class:"justify-center"},{prepend:r(()=>[t("div",ie,[a(s(y),{class:"w-[170px] h-[46px]",nodes:s(x).app.logo},null,8,["nodes"])])]),_:1}),a(ae,{class:"pt-1 pb-2"},{default:r(()=>[t("h4",le,[p(" Welcome to "),t("span",de,w(s(x).app.title),1),p("! ðŸ‘‹ðŸ» ")]),pe]),_:1}),t("div",ce,[a(oe,null,{default:r(()=>[p("for "),t("span",me,w(n.email),1)]),_:1}),a(te,{ref_key:"refForm",ref:V,onSubmit:U(T,["prevent"]),class:"mt-2"},{default:r(()=>[t("div",ue,[t("div",null,[a(l,{onKeydown:A,onKeyup:F,modelValue:n.password,"onUpdate:modelValue":o[0]||(o[0]=d=>n.password=d),label:"New Password",type:m.value?"text":"password","append-inner-icon":m.value?"tabler-eye-off":"tabler-eye","onClick:appendInner":o[1]||(o[1]=d=>m.value=!m.value),placeholder:".......",rules:["requiredValidator"in e?e.requiredValidator:s(L),"passwordValidator"in e?e.passwordValidator:s(J)],hasCapsLock:k.value,currentId:"passwordId"},null,8,["modelValue","type","append-inner-icon","rules","hasCapsLock"])]),t("div",null,[a(l,{onKeydown:S,onKeyup:q,modelValue:n.password_confirmation,"onUpdate:modelValue":o[2]||(o[2]=d=>n.password_confirmation=d),label:"Password Confirmation",placeholder:".......",type:u.value?"text":"password","append-inner-icon":u.value?"tabler-eye-off":"tabler-eye","onClick:appendInner":o[3]||(o[3]=d=>u.value=!u.value),rules:["requiredValidator"in e?e.requiredValidator:s(L),("confirmedValidator"in e?e.confirmedValidator:s(O))(n.password_confirmation,n.password)],hasCapsLock:b.value,currentId:"confirmId"},null,8,["modelValue","type","append-inner-icon","rules","hasCapsLock"])]),a(W,{block:"",color:e.isAdmin?"black":"primary",class:f({"text-white":e.isAdmin}),type:"submit"},{default:r(()=>[p(w(c.value?"":"Reset Password")+" ",1),c.value?(_(),D(s(X),{key:0,icon:"tail-spin",color:"white",class:"block w-4 h-4"})):G("",!0)]),_:1},8,["color","class"]),t("div",fe,[a(N,{class:f([e.isAdmin?"text-black":"text-primary","w-fit flex justify-center items-center gap-1 text-sm"]),to:{name:"login"}},{default:r(()=>[p(" Back to Login ")]),_:1},8,["class"])])])]),_:1},512)])]),_:1})])])}}});export{Ce as _};
