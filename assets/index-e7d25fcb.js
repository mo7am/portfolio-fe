import{d as Oe,o as l,h as C,f as c,b as n,c as o,z as j,F as $,V as f,O as Kt,y as Ie,e,a1 as Wt,R as d,a4 as Qt,r as m,k as t,Z as q,Q as y,a0 as He,ci as z,a as Ke,cU as pe,L as We,M as pt,bq as ft,H as Gt,w as ut,J as Jt,bm as Zt,cS as _t,S as Xt,b6 as Ue,cR as Yt,cQ as Be}from"./index-ab2bc521.js";import{a as es,_ as ts}from"./AppTextarea.vue_vue_type_script_setup_true_lang-3993f788.js";import{V as $e,a as Ve}from"./VRow-ba1da485.js";import{V as ss,a as ls}from"./VRadioGroup-a2bdd812.js";import{b as os}from"./VTextField-bc742ce7.js";import{V as as}from"./VSpacer-b5948b9a.js";import{_ as ht}from"./AppTextField.vue_vue_type_style_index_0_lang-ff2427f7.js";import{_ as mt}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-01c6a1ae.js";import{_ as ns}from"./BoxIcon.vue_vue_type_script_setup_true_lang-d6cac4eb.js";import{P as ye}from"./vue3-perfect-scrollbar.esm-8af4f7c1.js";import{V as se,a as we,b as Re}from"./VCard-c9d7cfad.js";import{V as _e}from"./VDialog-4ab52581.js";import{_ as ce}from"./field.vue_vue_type_script_setup_true_lang-02dd1b1e.js";import{p as le}from"./placeholder-998ebc73.js";import{V as Fe}from"./VTooltip-1a5a6ea6.js";import{_ as Me}from"./LoadingIcon.vue_vue_type_script_setup_true_lang-2352b216.js";import{_ as is}from"./DatePicker.vue_vue_type_style_index_0_lang-9c1149fd.js";import{_ as ds}from"./index.vue_vue_type_style_index_0_lang-e8a19a4b.js";import{a as cs,_ as Ye}from"./CustomCheckbox.vue_vue_type_script_setup_true_lang-5e3d6436.js";import{_ as rs}from"./Pagination.vue_vue_type_script_setup_true_lang-6d9bdbde.js";import{V as et}from"./VDivider-b868c04b.js";import{V as ue}from"./VCardText-6d82c75f.js";import{V as Ne}from"./VCheckbox-70ac096e.js";import{V as qe}from"./VSwitch-75acd94a.js";import"./forwardRefs-6ea3df5c.js";import"./VImg-7ee89f5e.js";import"./transition-99e7ac04.js";import"./VSelectionControl-e6ec7db0.js";import"./createSimpleFunctional-c52b7322.js";import"./VAvatar-b89a8ade.js";import"./VOverlay-39b4b039.js";import"./dialog-transition-6ea18c7a.js";import"./ReceiptTemplate.vue_vue_type_script_setup_true_lang-4ab734f1.js";import"./VMenu-6ec9b18a.js";import"./AppSelect.vue_vue_type_script_setup_true_lang-3371fd7f.js";import"./VSelect-9cc3df93.js";import"./VList-6df8630b.js";import"./VListItem-93d403d9.js";import"./ssrBoot-93503f06.js";import"./VCheckboxBtn-023236ba.js";import"./Lucide.vue_vue_type_script_setup_true_lang-5dcb49e0.js";import"./DeletePopup.vue_vue_type_script_setup_true_lang-8649cda4.js";const us={class:"flex-grow-1"},_s={class:"d-flex align-center mb-1"},ps={class:"cr-title text-base"},fs={key:0,class:"text-disabled text-base"},hs={class:"text-sm mb-0"},ms=Oe({__name:"CustomRadios",props:{selectedRadio:{},radioContent:{},gridColumn:{}},emits:["update:selectedRadio"],setup(S,{emit:u}){const D=S,X=u,E=v=>{X("update:selectedRadio",v)};return(v,U)=>D.radioContent?(l(),C(ss,{key:0,"model-value":D.selectedRadio,"onUpdate:modelValue":E},{default:c(()=>[n($e,null,{default:c(()=>[(l(!0),o($,null,j(D.radioContent,x=>(l(),C(Ve,Kt({key:x.title},v.gridColumn),{default:c(()=>[n(os,{class:Ie(["custom-input custom-radio rounded cursor-pointer",D.selectedRadio===x.value?"active":""])},{default:c(()=>[e("div",null,[n(ls,{value:x.value},null,8,["value"])]),Wt(v.$slots,"default",{item:x},()=>[e("div",us,[e("div",_s,[e("h6",ps,d(x.title),1),n(as),x.subtitle?(l(),o("span",fs,d(x.subtitle),1)):f("",!0)]),e("p",hs,d(x.desc),1)])],!0)]),_:2},1032,["class"])]),_:2},1040))),128))]),_:3})]),_:3},8,["model-value"])):f("",!0)}});const vs=Qt(ms,[["__scopeId","data-v-07ca7432"]]),ys={key:0,class:"ma-0 mt-n1"},bs={cols:"12",class:"border-t cursor-pointer pa-4 shortcut-icon"},gs={class:"search-style d-flex"},xs={key:1,class:"ma-0 mt-n1 rounded"},ks={cols:"12",class:"rounded border-t pa-4 shortcut-icon"},ws={class:"p-2 flex items-center justify-between gap-4 bg-gray-100"},$s=e("span",{style:{color:"black","font-size":"17px","font-weight":"bold","text-decoration":"underline"}},"Search Parameter",-1),Vs=[$s],js={class:"mb-0",style:{color:"black"}},Ss={key:0,class:"p-2 flex items-center justify-between gap-4 bg-gray-100"},Cs=e("h6",{class:"mb-0"},[e("span",null,"Amount:")],-1),Rs={class:"mb-0",style:{color:"black"}},Fs={key:1,class:"p-2 flex items-center justify-between gap-4 bg-gray-100"},Is=e("h6",{class:"mb-0"},[e("span",null,"Consumer:")],-1),Os={class:"mb-0",style:{color:"black"}},Ps={key:2,class:"p-2 flex items-center justify-between gap-4 bg-gray-100"},Ls=e("h6",{class:"mb-0"},[e("span",null,"Reference Id:")],-1),Ds={class:"mb-0",style:{color:"black"}},Ts={key:3,class:"p-2 flex items-center justify-between gap-4 bg-gray-100"},Es=e("h6",{class:"mb-0"},[e("span",null,"Date:")],-1),As={class:"mb-0",style:{color:"black"}},zs={key:4,class:"p-2 flex items-center justify-between gap-4 bg-gray-100"},Us=e("h6",{class:"mb-0"},[e("span",null,"TPN:")],-1),Bs={class:"mb-0",style:{color:"black"}},Ms={key:5,class:"p-2 flex items-center justify-between gap-4 bg-gray-100"},Ns=e("h6",{class:"mb-0"},[e("span",null,"Order Id:")],-1),qs={class:"mb-0",style:{color:"black"}},Hs={key:2,class:"p-4 text-center"},Ks={style:{"margin-top":"-15px"},class:"flex flex-col gap-4 p-4 bg-white dark:bg-surface shadow rounded"},Ws=["onClick"],Qs={class:"flex flex-col justify-between h-full"},Gs={class:"mb-0"},Js=e("span",{style:{color:"#0ebcf5"}},"Sale",-1),Zs={class:"text-muted d-block"},Xs=e("span",{style:{color:"black","font-size":"15px","font-weight":"bold"}},"Order: ",-1),Ys={class:"mb-0",style:{"font-size":"15px"}},el={class:"flex gap-2"},tl={class:"flex flex-col justify-between h-full"},sl={class:"text-muted d-block"},ll=e("i",{class:"fas fa-clock"},null,-1),ol={class:"mb-0",style:{color:"black"}},al={width:"46",height:"36",viewBox:"0 0 46 36",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nl=e("rect",{width:"46",height:"35.1429",rx:"4",fill:"#E9F5FE"},null,-1),il=["stroke"],dl={key:4,class:"flex flex-col gap-4 p-4 bg-white dark:bg-surface"},cl=e("div",{class:"text-slate-400 text-center"},"No Records Found!",-1),rl=[cl],ul={class:"h-fit"},_l={class:"search-style"},pl={key:0,class:"p-4 text-center"},fl={class:"flex flex-col gap-4 p-4 bg-white dark:bg-surface shadow rounded"},hl={class:"flex flex-col justify-between h-full"},ml={class:"mb-0"},vl=e("span",{style:{color:"#0ebcf5"}},"Sale",-1),yl={class:"text-muted d-block"},bl={class:"mb-0",style:{color:"black","font-size":"17px","font-weight":"bold"}},gl={class:"flex gap-2"},xl={class:"flex flex-col justify-between h-full"},kl={class:"text-muted d-block"},wl=e("i",{class:"fas fa-clock"},null,-1),$l={class:"mb-0",style:{color:"black"}},Vl={width:"46",height:"36",viewBox:"0 0 46 36",fill:"none",xmlns:"http://www.w3.org/2000/svg"},jl=e("rect",{width:"46",height:"35.1429",rx:"4",fill:"#E9F5FE"},null,-1),Sl=["stroke"],Cl={key:2,class:"flex flex-col gap-4 p-4 bg-white dark:bg-surface"},Rl=e("div",{class:"text-slate-400 text-center"},"No Records Found!",-1),Fl=[Rl],Il=Oe({__name:"lists",props:{orders:{type:Array,default:[]},metaObj:{type:Object,default:{}},isLoading:{type:Boolean,default:!1},isShowMore:{type:Boolean,default:!1},posSetting:{type:Object,default:{}},parameters:{type:Object,default:{}},isEmptyParameters:{type:Boolean,default:!1},order:{type:Object,default:{}}},setup(S){const u=S,D=m(!1),X=m(window.innerWidth),E=m({}),v=m(""),U=async x=>{E.value=x};return window.addEventListener("resize",()=>{X.value=window.innerWidth}),(x,k)=>{const B=ht,H=Ke("IconBtn"),M=es,N=mt,G=Ke("RouterLink");return t(X)>785?(l(),C(se,{key:0,"max-height":"635",class:"h-fit lg:min-h-[635px] lg:h-full d-flex flex-column"},{default:c(()=>[u.isEmptyParameters?(l(),o("div",xs,[e("div",ks,[e("div",ws,[e("h4",{class:"cursor-pointer mb-0",onClick:k[2]||(k[2]=p=>x.$emit("callOpenFilter"))},Vs),e("h6",js,[n(H,{onClick:k[3]||(k[3]=p=>x.$emit("callResetFilter")),variant:"elevated",class:"v-dialog-close-btn",style:{"background-color":"white"}},{default:c(()=>[n(He,{icon:"tabler-x",size:"20"})]),_:1})])]),u.parameters.total_price!=""?(l(),o("div",Ss,[Cs,e("h6",Rs,d(u.parameters.total_price)+" $ ",1)])):f("",!0),u.parameters.customer_id!=""?(l(),o("div",Fs,[Is,e("h6",Os,d((u.parameters.customer_id,u.parameters.customer_name)),1)])):f("",!0),u.parameters.transaction_id!=""?(l(),o("div",Ps,[Ls,e("h6",Ds,d(u.parameters.transaction_id),1)])):f("",!0),u.parameters.exact_date!=""?(l(),o("div",Ts,[Es,e("h6",As,d(u.parameters.exact_date),1)])):f("",!0),u.parameters.tpn!=""?(l(),o("div",zs,[Us,e("h6",Bs,d(u.parameters.tpn),1)])):f("",!0),u.parameters.id!=""?(l(),o("div",Ms,[Ns,e("h6",qs,d(S.posSetting&&S.posSetting.order_prefix?S.posSetting.order_prefix:"#")+" "+d(u.parameters.id),1)])):f("",!0)])])):(l(),o("div",ys,[e("div",bs,[e("div",gs,[n(B,{modelValue:t(v),"onUpdate:modelValue":k[0]||(k[0]=p=>q(v)?v.value=p:null),placeholder:"Search...",id:"text_search",isSearchBox:!0,readonly:!0,onClick:k[1]||(k[1]=p=>x.$emit("callOpenFilter"))},null,8,["modelValue"]),y("   ")])])])),u.isLoading&&u.isShowMore==!1?(l(),o("span",Hs,"Loading... ")):S.orders.length?(l(),C(t(ye),{key:3,options:{wheelPropagation:!1}},{default:c(()=>[e("div",Ks,[(l(!0),o($,null,j(S.orders,p=>(l(),o("div",{style:{height:"86px"},class:Ie(["p-4 rounded-lg shadow flex items-center justify-between gap-4 cursor-pointer",{"bg-secondary dark:!bg-slate-600 text-primary":t(E).id===p.id||u.order.id===p.id,"bg-[#f8f7fa] dark:bg-darkmode-bg":t(E).id!==p.id||u.order.id!==p.id}]),to:"",onClick:_=>{U(p),x.$emit("callSelectCurrentOrder",p)}},[e("div",Qs,[e("h6",Gs,[Js,y(" - "+d(p.status=="cancel"?"Canceled":p.status),1)]),e("small",Zs,[Xs,e("span",Ys,d((u.posSetting&&u.posSetting.order_prefix?u.posSetting.order_prefix:"#")+p.id),1)])]),e("div",el,[e("div",tl,[e("small",sl,[ll,y(" "+d(p.created_at)+" "+d(p.created_time_at),1)]),e("h6",ol," $"+d(("makeFLoat"in x?x.makeFLoat:t(pe))(p.total_price,"")),1)]),(l(),o("svg",al,[nl,e("path",{d:"M20 12L26 17.5714L20 23.1429",stroke:t(E).id===p.id||u.order.id===p.id?t(We):"#2196F3","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,8,il)]))])],10,Ws))),256)),S.metaObj&&S.metaObj.last_page>1?(l(),C(z,{key:0,disabled:S.metaObj.current_page==S.metaObj.last_page,onClick:k[4]||(k[4]=p=>x.$emit("callNextPage")),type:"button",class:"p-4 rounded-lg shadow flex gap-4 text-center"},{default:c(()=>[y(d(u.isShowMore?"Loading...":"Show More"),1)]),_:1},8,["disabled"])):f("",!0)])]),_:1})):(l(),o("div",dl,rl))]),_:1})):(l(),o($,{key:1},[e("div",ul,[e("button",{class:"cursor-pointer",onClick:k[5]||(k[5]=p=>D.value=!0)},[n(M)])]),n(_e,{modelValue:t(D),"onUpdate:modelValue":k[10]||(k[10]=p=>q(D)?D.value=p:null),width:"500"},{default:c(()=>[n(N,{onClick:k[6]||(k[6]=p=>D.value=!t(D))}),n(se,{"max-height":"635",class:"d-flex flex-column"},{default:c(()=>[n($e,{class:"ma-0 mt-n1"},{default:c(()=>[n(Ve,{cols:"12",class:"border-t cursor-pointer pa-4 shortcut-icon"},{default:c(()=>[e("div",_l,[n(B,{modelValue:t(v),"onUpdate:modelValue":k[7]||(k[7]=p=>q(v)?v.value=p:null),placeholder:"Search...",id:"text_search",onInput:k[8]||(k[8]=p=>x.$emit("callSearchOrders",t(v))),isSearchBox:!0},null,8,["modelValue"])])]),_:1})]),_:1}),S.isLoading&&u.isShowMore==!1?(l(),o("span",pl,"Loading... ")):S.orders.length?(l(),C(t(ye),{key:1,options:{wheelPropagation:!1}},{default:c(()=>[e("div",fl,[(l(!0),o($,null,j(S.orders,p=>(l(),C(G,{class:Ie(["p-4 rounded-lg shadow flex items-center justify-between gap-4",{"bg-secondary dark:!bg-slate-600 text-primary":t(E).id===p.id||u.order.id===p.id,"bg-[#f8f7fa] dark:bg-darkmode-bg":t(E).id!==p.id||u.order.id!==p.id}]),to:"",onClick:_=>{U(p),x.$emit("callSelectCurrentOrder",p)}},{default:c(()=>[e("div",hl,[e("h6",ml,[vl,y(" - "+d(p.status=="cancel"?"Canceled":p.status),1)]),e("small",yl,[y("Order: "),e("span",bl,"#"+d(p.id),1)])]),e("div",gl,[e("div",xl,[e("small",kl,[wl,y(" "+d(p.created_at),1)]),e("h6",$l," $"+d(("makeFLoat"in x?x.makeFLoat:t(pe))(p.total_price,"")),1)]),(l(),o("svg",Vl,[jl,e("path",{d:"M20 12L26 17.5714L20 23.1429",stroke:t(E).id===p.id||u.order.id===p.id?t(We):"#2196F3","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,8,Sl)]))])]),_:2},1032,["class","onClick"]))),256)),S.metaObj&&S.metaObj.last_page>1?(l(),C(z,{key:0,disabled:S.metaObj.current_page==S.metaObj.last_page,onClick:k[9]||(k[9]=p=>x.$emit("callNextPage")),type:"button",class:"p-4 rounded-lg shadow flex gap-4 text-center"},{default:c(()=>[y(d(u.isShowMore?"Loading...":"Show More"),1)]),_:1},8,["disabled"])):f("",!0)])]),_:1})):(l(),o("div",Cl,Fl))]),_:1})]),_:1},8,["modelValue"])],64))}}});const Ol={key:0},Pl=e("br",null,null,-1),Ll=e("div",{style:{"background-color":"#e5e7eb",padding:"5px","font-weight":"bold","margin-right":"-4px"}}," Customer Receipt ",-1),Dl=e("br",null,null,-1),Tl={key:1},El=e("br",null,null,-1),Al=e("div",{style:{"background-color":"#e5e7eb",padding:"5px","font-weight":"bold","margin-right":"-4px"}}," Kitchen-bar Receipt ",-1),zl=e("br",null,null,-1),Ul={key:2},Bl=e("br",null,null,-1),Ml=e("div",{style:{"background-color":"#e5e7eb",padding:"5px","font-weight":"bold","margin-right":"-4px"}}," Merchant Receipt ",-1),Nl=e("br",null,null,-1),ql={key:3},Hl=e("br",null,null,-1),Kl=e("div",{style:{"background-color":"#e5e7eb",padding:"5px","font-weight":"bold","margin-right":"-4px"}}," Terminal Receipt ",-1),Wl=e("br",null,null,-1),Ql={key:4},Gl=e("br",null,null,-1),Jl=e("div",{style:{"background-color":"#e5e7eb",padding:"5px","font-weight":"bold","margin-right":"-4px"}}," PreCheck Receipt ",-1),Zl=e("br",null,null,-1),Xl=Oe({__name:"index",props:{receipts:{type:Object,default:{}},order:{type:Object,default:{}},transaction:{type:Object,default:{}},posSetting:{type:Object,default:{}}},setup(S){const u=S;return(D,X)=>{var E,v,U,x,k,B,H,M,N,G,p,_,W,fe,be,J,A,oe,ae,ne,ie,ge,Y,he,de;return l(),o($,null,[((E=u.receipts)==null?void 0:E.customer)!=null&&((x=(U=(v=u.receipts)==null?void 0:v.customer)==null?void 0:U.fields)==null?void 0:x.length)>0?(l(),o("div",Ol,[Pl,Ll,Dl,n(ce,{type:"customer",receipt:(k=u.receipts)==null?void 0:k.customer,order:u.order,transaction:u.transaction,posSetting:u.posSetting,class:"md:w-[265px] mx-auto lg:w-auto"},null,8,["receipt","order","transaction","posSetting"])])):f("",!0),((B=u.receipts)==null?void 0:B["kitchen-bar"])!=null&&((N=(M=(H=u.receipts)==null?void 0:H["kitchen-bar"])==null?void 0:M.fields)==null?void 0:N.length)>0?(l(),o("div",Tl,[El,Al,zl,n(ce,{type:"kitchen-bar",receipt:(G=u.receipts)==null?void 0:G["kitchen-bar"],order:u.order,transaction:u.transaction,posSetting:u.posSetting,class:"md:w-[265px] mx-auto lg:w-auto"},null,8,["receipt","order","transaction","posSetting"])])):f("",!0),((p=u.receipts)==null?void 0:p.merchant)!=null&&((fe=(W=(_=u.receipts)==null?void 0:_.merchant)==null?void 0:W.fields)==null?void 0:fe.length)>0?(l(),o("div",Ul,[Bl,Ml,Nl,n(ce,{type:"merchant",receipt:(be=u.receipts)==null?void 0:be.merchant,order:u.order,transaction:u.transaction,posSetting:u.posSetting,class:"md:w-[265px] mx-auto lg:w-auto"},null,8,["receipt","order","transaction","posSetting"])])):f("",!0),((J=u.receipts)==null?void 0:J.terminal)!=null&&((ae=(oe=(A=u.receipts)==null?void 0:A.terminal)==null?void 0:oe.fields)==null?void 0:ae.length)>0?(l(),o("div",ql,[Hl,Kl,Wl,n(ce,{type:"terminal",receipt:(ne=u.receipts)==null?void 0:ne.terminal,order:u.order,transaction:u.transaction,posSetting:u.posSetting,class:"md:w-[265px] mx-auto lg:w-auto"},null,8,["receipt","order","transaction","posSetting"])])):f("",!0),((ie=u.receipts)==null?void 0:ie.precheck)!=null&&((he=(Y=(ge=u.receipts)==null?void 0:ge.precheck)==null?void 0:Y.fields)==null?void 0:he.length)>0?(l(),o("div",Ql,[Gl,Jl,Zl,n(ce,{type:"precheck",receipt:(de=u.receipts)==null?void 0:de.precheck,order:u.order,transaction:u.transaction,posSetting:u.posSetting,class:"md:w-[265px] mx-auto lg:w-auto"},null,8,["receipt","order","transaction","posSetting"])])):f("",!0)],64)}}}),Yl={class:"mt-4 col-span-full lg:mt-0 lg:col-span-1 sm:border-r sm:px-10",style:{width:"492px","margin-left":"-38px"}},eo={id:"section-print",class:"flex flex-col bg-white font-mono md:w-[265px] mx-auto lg:w-auto"},to={class:""},so={class:"flex flex-col gap-"},lo={class:"text-2xl text-center text-black capitalize"},oo=e("h3",null,"Amount",-1),ao={style:{"font-weight":"bold","font-size":"30px"},class:"text-black"},no=e("br",null,null,-1),io={class:""},co={key:0,class:"text-center gap-2 capitalize"},ro=e("br",null,null,-1),uo={class:""},_o={class:"flex justify-between gap-2"},po=e("br",null,null,-1),fo=e("div",{class:"text-center"},[e("span",{style:{"font-weight":"bold"},class:"text-black"},"Refund")],-1),ho=e("br",null,null,-1),mo={class:""},vo={class:"flex justify-between gap-2"},yo=e("div",null,"ReferenceId:",-1),bo={class:""},go={class:"flex justify-between gap-2"},xo=e("div",null,"Cashier:",-1),ko={class:"capitalize"},wo=e("div",{class:""},[e("div",null,[e("div",{class:"flex flex-col gap-"},[e("div",{class:"text-center text-black uppercase border-b-[2px] border-dashed"})])])],-1),$o=e("br",null,null,-1),Vo={class:""},jo={class:"flex justify-between gap-2"},So=e("br",null,null,-1),Co={key:0},Ro=e("br",null,null,-1),Fo=e("span",{style:{color:"black","font-size":"17px","font-weight":"bold"}}," Items ",-1),Io=e("br",null,null,-1),Oo={style:{"margin-top":"-15px"},class:"flex flex-col gap-4 p-4 bg-white dark:bg-surface shadow rounded"},Po={style:{height:"86px"},class:"p-4 rounded-lg shadow flex items-center justify-between gap-4"},Lo={key:0,class:"flex justify-between"},Do=["src"],To={class:"flex-col h-full pl-4"},Eo={class:"mb-0"},Ao={class:"text-muted d-block"},zo={class:"mb-0"},Uo={key:0},Bo={style:{color:"#0ebcf5"}},Mo={key:0},No={key:1},qo={key:0},Ho={key:1,class:"mb-0"},Ko={style:{color:"#0ebcf5"}},Wo={key:0},Qo={key:1,class:"flex justify-between"},Go=["src"],Jo={class:"flex-col h-full pl-4"},Zo={class:"mb-0"},Xo={class:"flex gap-2"},Yo=e("div",{class:"p-4 flex items-center justify-between gap-4"},null,-1),ea={class:"flex flex-col justify-between h-full"},ta={class:"text-muted d-block"},sa=e("i",{class:"fas fa-clock"},null,-1),la={class:"mb-0",style:{color:"black"}},oa=e("br",null,null,-1),aa={class:"flex justify-between mt-4"},na={class:"flex justify-end mt-4"},ia={class:"flex justify-start mt-4"},da=Oe({__name:"RefundReceiptFields",props:{transaction:{type:Object,default:{}},posSetting:{type:Object,default:{}}},setup(S){const u=S;return(D,X)=>{const E=ft("print");return l(),o("div",Yl,[e("div",eo,[e("div",to,[e("div",null,[e("div",so,[e("div",lo,[oo,e("h1",ao," $"+d(u.transaction.total_amount.toFixed(2)),1)])]),no,e("div",io,[u.posSetting?(l(),o("div",co,d(u.posSetting.name),1)):f("",!0)]),ro])]),e("div",uo,[e("div",null,[e("div",_o,[e("div",null,d(u.transaction.created_at),1),e("div",null,d(u.transaction.created_time_at),1)])])]),po,fo,ho,e("div",mo,[e("div",null,[e("div",vo,[yo,e("div",null,"#"+d(u.transaction.id),1)])])]),e("div",bo,[e("div",null,[e("div",go,[xo,e("div",ko,d(u.transaction.user.name),1)])])]),wo,$o,e("div",Vo,[e("div",null,[e("div",jo,[e("div",null,d(u.transaction.refund_reason),1)])])]),So,u.transaction.refundedItems.length?(l(),o("div",Co,[Ro,Fo,Io,n(t(ye),{options:{wheelPropagation:!1}},{default:c(()=>[e("div",Oo,[(l(!0),o($,null,j(u.transaction.refundedItems,v=>{var U,x,k,B,H;return l(),o("div",Po,[v.orderItem.type=="item"?(l(),o("div",Lo,[e("img",{src:(x=(U=v.orderItem)==null?void 0:U.product)!=null&&x.image?(B=(k=v==null?void 0:v.orderItem)==null?void 0:k.product)==null?void 0:B.image:t(le),class:"w-[40px] h-[40px] rounded"},null,8,Do),e("div",To,[e("h6",Eo,[e("span",null,d(v.orderItem.name),1)]),e("small",Ao,[e("span",zo,[v.orderItem.product.categories.length>5?(l(),o("span",Uo,[(l(!0),o($,null,j(v.orderItem.product.categories.slice(0,5),(M,N)=>(l(),o("span",null,[e("span",Bo,d(M.name),1),N!=Object.keys(v.orderItem.product.categories.slice(0,5)).length-1?(l(),o("span",Mo," - ")):(l(),o("span",No," ....")),n(Fe,{"open-delay":"500",location:"top",activator:"parent"},{default:c(()=>[(l(!0),o($,null,j(v.orderItem.product.categories.slice(0,10),(G,p)=>(l(),o("span",null,[e("span",null,d(G.name),1),p!=Object.keys(v.orderItem.product.categories.slice(0,10)).length-1?(l(),o("span",qo," , ")):f("",!0)]))),256))]),_:2},1024)]))),256))])):v.orderItem.product.categories.length<=5?(l(),o("span",Ho,[(l(!0),o($,null,j(v.orderItem.product.categories.slice(0,5),(M,N)=>(l(),o("span",null,[e("span",Ko,[y(d(M.name)+" ",1),N!=Object.keys(v.orderItem.product.categories.slice(0,5)).length-1?(l(),o("span",Wo," - ")):f("",!0)])]))),256))])):f("",!0)])])])])):(l(),o("div",Qo,[e("img",{src:t(le),class:"w-[40px] h-[40px] rounded"},null,8,Go),e("div",Jo,[e("h6",Zo,[e("span",null,d(((H=v==null?void 0:v.orderItem)==null?void 0:H.name)??"Manual Entry"),1)])])])),e("div",Xo,[Yo,e("div",ea,[e("small",ta,[sa,y(" "+d(v.orderItem.created_time_at),1)]),e("h6",la," $"+d(("makeFLoat"in D?D.makeFLoat:t(pe))(v.orderItem.total_amount,"")),1)])])])}),256))])]),_:1})])):f("",!0),oa]),e("div",aa,[e("div",na,[pt((l(),C(z,{class:"btn btn-secondary w-fit px-8"},{default:c(()=>[y(" Print ")]),_:1})),[[E,"#section-print"]])]),e("div",ia,[n(z,{class:"btn btn-primary w-fit px-8",onClick:X[0]||(X[0]=v=>D.$emit("closeViewRefundReceiptPopup"))},{default:c(()=>[y(" Finish ")]),_:1})])])])}}}),ca={class:"flex items-center gap-2"},ra={class:"bg-secondary dark:!bg-surface p-2 shadow rounded flex"},ua=e("p",{class:"text-xl"},"Order Transactions",-1),_a={class:"grid ineventory-grid gap-4 mt-4"},pa={key:0,class:"flex flex-col gap-4"},fa=e("h6",{style:{"text-decoration":"underline"},class:"text-base font-weight-medium mt-2 mb-0"}," Details ",-1),ha=e("br",null,null,-1),ma={class:"flex items-center justify-between gap-4"},va={class:"flex flex-col justify-between h-full"},ya={class:"mb-0"},ba=e("span",{style:{color:"#0ebcf5"}},"Sale",-1),ga={class:"text-muted d-block"},xa=e("span",{class:"mb-0",style:{color:"black","font-size":"15px","font-weight":"bold"}},"Order: ",-1),ka={style:{"font-size":"15px"},class:"mb-0"},wa={class:"flex gap-2"},$a={class:"p-4 flex items-center justify-between gap-4"},Va={class:"flex flex-col justify-between h-full"},ja={class:"text-muted d-block"},Sa=e("i",{class:"fas fa-clock"},null,-1),Ca={class:"mb-0",style:{color:"black"}},Ra=e("h6",{style:{"text-decoration":"underline"},class:"text-base font-weight-medium mt-2 mb-0"}," Transactions ",-1),Fa=e("br",null,null,-1),Ia={class:"p-4 rounded-lg shadow flex items-center justify-between gap-4",to:""},Oa={class:"flex flex-col justify-between h-full"},Pa={class:"mb-0"},La={key:0,style:{color:"#0ebcf5"}},Da={key:1,style:{color:"#ff6f61"}},Ta={class:"text-muted d-block"},Ea=e("span",{class:"mb-0",style:{color:"black","font-size":"15px","font-weight":"bold"}},"Transaction ID: ",-1),Aa={style:{"font-size":"15px"},class:"mb-0"},za={class:"flex gap-2"},Ua={class:"p-4 flex items-center justify-between gap-4"},Ba={class:"flex flex-col justify-between h-full"},Ma={class:"text-muted d-block"},Na=e("i",{class:"fas fa-clock"},null,-1),qa={class:"mb-0",style:{color:"black"}},Ha={key:0,class:"flex gap-2"},Ka={key:1,style:{"margin-right":"45px"},class:"flex gap-2"},Wa=e("h6",{style:{"text-decoration":"underline"},class:"text-base font-weight-medium mt-2 mb-0"}," Items ",-1),Qa=e("br",null,null,-1),Ga={class:"p-4 rounded-lg shadow flex items-center justify-between",to:""},Ja={key:0,class:"flex justify-between"},Za=["src"],Xa={class:"flex-col h-full pl-4"},Ya={class:"mb-0"},en={class:"text-muted d-block"},tn={class:"mb-0"},sn={key:0},ln={style:{color:"#0ebcf5"}},on={key:0},an={key:1},nn={key:0},dn={key:1,class:"mb-0"},cn={style:{color:"#0ebcf5"}},rn={key:0},un={key:1,class:"flex justify-between"},_n=["src"],pn={class:"flex-col h-full pl-4"},fn={class:"mb-0"},hn={class:"flex gap-2"},mn={class:"flex flex-col justify-between h-full"},vn={class:"text-muted d-block"},yn=e("i",{class:"fas fa-clock"},null,-1),bn={class:"mb-0",style:{color:"black"}},gn={key:0,class:"mb-0 text-primary"},xn={key:1,style:{color:"#ff6f61"},class:"mb-0"},kn={class:"p-2 flex items-center justify-between gap-4 bg-gray-100"},wn=e("h6",{class:"mb-0"},[e("span",null,"Items Subtotal:")],-1),$n={class:"mb-0",style:{color:"black"}},Vn={class:"p-2 flex items-center justify-between gap-4 bg-gray-100"},jn=e("h6",{class:"mb-0"},[e("span",null,"Discount")],-1),Sn={class:"mb-0",style:{color:"black"}},Cn={class:"p-2 flex items-center justify-between gap-4 bg-gray-100"},Rn=e("h6",{class:"mb-0"},[e("span",null,"Subtotal")],-1),Fn={class:"mb-0",style:{color:"black"}},In={class:"p-2 flex items-center justify-between gap-4 bg-gray-100"},On=e("h6",{class:"mb-0"},[e("span",null,"Taxes")],-1),Pn={class:"mb-0",style:{color:"black"}},Ln={key:0,class:"p-2 flex items-center justify-between gap-4 bg-gray-100"},Dn=e("h6",{class:"mb-0"},[e("span",null,"Tips")],-1),Tn={class:"mb-0",style:{color:"black"}},En={key:1,class:"p-2 flex items-center justify-between gap-4 bg-gray-100"},An=e("h6",{class:"mb-0"},[e("span",null,"Delivery Fees")],-1),zn={class:"mb-0",style:{color:"black"}},Un=e("hr",{class:"bg-black"},null,-1),Bn={class:"p-2 flex items-center justify-between gap-4 bg-gray-100"},Mn=e("h3",{style:{color:"black"},class:"mb-0 text-black"}," Total ",-1),Nn={class:"mb-0",style:{color:"#0ebcf5"}},qn={class:"mt-4 flex justify-center"},Hn={class:"py-8 px-4"},Kn={id:"total_price"},Wn={id:"customer_id",class:"relative"},Qn={id:"tpn"},Gn={id:"transaction_id"},Jn={id:"exact_date"},Zn={id:"id"},Xn={class:"mt-4 flex justify-center"},Yn={key:1},ei=e("div",{class:"text-center"},"There Is No Active Receipts Found!",-1),ti={class:"demo-space-x"},si={key:0},li={key:1},oi={key:2},ai={key:3},ni=e("br",null,null,-1),ii={id:"section-to-print",style:{height:"100%"}},di=e("br",null,null,-1),ci={key:0},ri=e("br",null,null,-1),ui=e("div",{style:{"background-color":"#e5e7eb",padding:"5px","font-weight":"bold","margin-right":"-4px"}}," Customer Receipt ",-1),_i=e("br",null,null,-1),pi={key:1},fi=e("br",null,null,-1),hi=e("div",{style:{"background-color":"#e5e7eb",padding:"5px","font-weight":"bold","margin-right":"-4px"}}," Merchant Receipt ",-1),mi=e("br",null,null,-1),vi={key:2},yi=e("br",null,null,-1),bi=e("div",{style:{"background-color":"#e5e7eb",padding:"5px","font-weight":"bold","margin-right":"-4px"}}," Kitchen-bar Receipt ",-1),gi=e("br",null,null,-1),xi={key:3},ki=e("br",null,null,-1),wi=e("div",{style:{"background-color":"#e5e7eb",padding:"5px","font-weight":"bold","margin-right":"-4px"}}," Terminal Receipt ",-1),$i=e("br",null,null,-1),Vi=e("div",{class:"text-center"}," There Is No Active Receipts Found To Print! ",-1),ji={class:"capitalize"},Si={key:0},Ci={class:"flex flex-col gap-4"},Ri={class:"form-group"},Fi={class:"flex justify-between"},Ii=e("div",{class:"flex flex-col",id:"is_discounts"},[e("label",{class:"text-base",for:"is_discounts1"},"Custom Fee/Discounts")],-1),Oi={class:"form-group"},Pi={class:"flex justify-between"},Li=e("div",{class:"flex flex-col",id:"is_taxes"},[e("label",{class:"text-base",for:"is_taxes1"},"Taxes")],-1),Di={class:"form-group"},Ti={class:"flex justify-between"},Ei=e("div",{class:"flex flex-col",id:"is_delivery_fees"},[e("label",{class:"text-base",for:"is_delivery_fees1"},"Delivery Fees")],-1),Ai=e("br",null,null,-1),zi={id:"refund_type",class:"flex flex-col gap-2"},Ui={class:"grid grid-cols-2 p-1 bg-[#fafafa]",id:"refund_type"},Bi=["onClick"],Mi={class:"flex flex-col gap-4 py-2"},Ni={key:0,id:"amount"},qi={class:"text-sm text-danger mt-1"},Hi=e("br",null,null,-1),Ki={key:1,id:"items"},Wi={class:"text-center",style:{color:"black","font-size":"17px","font-weight":"bold"}},Qi={class:"flex gap-2 items-center",style:{float:"right","margin-top":"-17px"}},Gi={class:"flex gap-2 items-center"},Ji=e("br",null,null,-1),Zi=e("div",{style:{"background-color":"#e5e7eb",padding:"7px","font-weight":"bold"}}," Available For Refund ",-1),Xi={style:{"margin-top":"-15px"},class:"flex flex-col gap-4 p-4 bg-white dark:bg-surface shadow rounded"},Yi={style:{height:"86px"},class:"p-4 rounded-lg shadow flex items-center justify-between gap-4"},ed={key:0,class:"flex justify-between"},td=["src"],sd={class:"flex-col h-full pl-4"},ld={class:"mb-0"},od={class:"text-muted d-block"},ad={class:"mb-0"},nd={key:0},id={style:{color:"#0ebcf5"}},dd={key:0},cd={key:1},rd={key:0},ud={key:1,class:"mb-0"},_d={style:{color:"#0ebcf5"}},pd={key:0},fd={key:1,class:"flex justify-between"},hd=["src"],md={class:"flex-col h-full pl-4"},vd={class:"mb-0"},yd={class:"flex gap-2"},bd=e("div",{class:"p-4 flex items-center justify-between gap-4"},null,-1),gd={class:"flex flex-col justify-between h-full"},xd={class:"text-muted d-block"},kd=e("i",{class:"fas fa-clock"},null,-1),wd={class:"mb-0",style:{color:"black"}},$d={key:0,style:{color:"#ff6f61"},class:"mb-0"},Vd={key:0,class:"flex gap-2 items-center"},jd=["for","onClick"],Sd={class:"flex gap-2 items-center"},Cd={class:"text-sm text-danger mt-1"},Rd=e("br",null,null,-1),Fd={key:0,style:{"background-color":"#e5e7eb",padding:"7px","font-weight":"bold"}},Id={style:{"margin-top":"-15px"},class:"flex flex-col gap-4 p-4 bg-white dark:bg-surface shadow rounded"},Od={style:{height:"86px"},class:"p-4 rounded-lg shadow flex items-center justify-between gap-4"},Pd={key:0,class:"flex justify-between"},Ld=["src"],Dd={class:"flex-col h-full pl-4"},Td={class:"mb-0"},Ed={class:"text-muted d-block"},Ad={class:"mb-0"},zd={key:0},Ud={style:{color:"#0ebcf5"}},Bd={key:0},Md={key:1},Nd={key:0},qd={key:1,class:"mb-0"},Hd={style:{color:"#0ebcf5"}},Kd={key:0},Wd={key:1,class:"flex flex-col justify-between h-full"},Qd=["src"],Gd={class:"flex-col h-full pl-4"},Jd={class:"mb-0"},Zd={class:"flex gap-2"},Xd=e("div",{class:"p-4 flex items-center justify-between gap-4"},null,-1),Yd={class:"flex flex-col justify-between h-full"},ec={class:"text-muted d-block"},tc=e("i",{class:"fas fa-clock"},null,-1),sc={class:"mb-0",style:{color:"black"}},lc={key:0,style:{color:"#ff6f61"},class:"mb-0"},oc={key:0,class:"flex gap-2 items-center"},ac=["for","onClick"],nc={class:"flex gap-2 items-center"},ic={class:"flex justify-end mt-4"},dc={class:"flex justify-end mt-4"},cc={key:1},rc={key:1},uc={class:"p-4 mt-4"},_c={class:"search-style d-flex"},pc={class:"mt-4"},fc={key:0,class:"flex p-4"},hc={key:1,style:{"margin-top":"-15px"},class:"flex flex-col gap-4 p-4 bg-white dark:bg-surface shadow rounded"},mc=["onClick"],vc={class:"flex flex-col justify-between h-full"},yc={class:"mb-0"},bc={class:"flex gap-2"},gc={width:"46",height:"36",viewBox:"0 0 46 36",fill:"none",xmlns:"http://www.w3.org/2000/svg"},xc=e("rect",{width:"46",height:"35.1429",rx:"4",fill:"#E9F5FE"},null,-1),kc=["stroke"],wc={key:0,class:"mt-4 flex m-auto"},$c={key:2,class:"py-2 text-slate-400"},Vc={class:"text-sm text-danger mt-1"},jc={class:"flex justify-between mt-4"},Sc={class:"flex justify-start mt-4"},Cc={class:"flex justify-end mt-4"},Rc={key:2},Fc={key:0,class:"text-center",style:{color:"black","font-size":"17px","font-weight":"bold"}},Ic={key:1,class:"text-center",style:{color:"black","font-size":"17px","font-weight":"bold"}},Oc={class:"p-4 mt-4"},Pc=e("span",{style:{color:"black","font-size":"17px","font-weight":"bold"}}," Payment Type ",-1),Lc=e("br",null,null,-1),Dc=e("br",null,null,-1),Tc=e("span",{style:{color:"black","font-size":"17px","font-weight":"bold"}}," Reason ",-1),Ec={key:0},Ac=e("br",null,null,-1),zc=e("span",{style:{color:"black","font-size":"17px","font-weight":"bold"}}," Items ",-1),Uc={style:{"margin-top":"-15px"},class:"flex flex-col gap-4 p-4 bg-white dark:bg-surface shadow rounded"},Bc={style:{height:"86px"},class:"p-4 rounded-lg shadow flex items-center justify-between gap-4"},Mc={key:0,class:"flex justify-between"},Nc=["src"],qc={class:"flex-col h-full pl-4"},Hc={class:"mb-0"},Kc={class:"text-muted d-block"},Wc={class:"mb-0"},Qc={key:0},Gc={style:{color:"#0ebcf5"}},Jc={key:0},Zc={key:1},Xc={key:0},Yc={key:1,class:"mb-0"},er={style:{color:"#0ebcf5"}},tr={key:0},sr={key:1,class:"flex justify-between"},lr=["src"],or={class:"flex-col h-full pl-4"},ar={class:"mb-0"},nr={class:"flex gap-2"},ir=e("div",{class:"p-4 flex items-center justify-between gap-4"},null,-1),dr={class:"flex flex-col justify-between h-full"},cr={class:"text-muted d-block"},rr=e("i",{class:"fas fa-clock"},null,-1),ur={class:"mb-0",style:{color:"black"}},_r={key:0,style:{color:"#ff6f61"},class:"mb-0"},pr=e("br",null,null,-1),fr={class:"flex justify-between mt-4"},hr={class:"flex justify-start mt-4"},mr={class:"flex justify-end mt-4"},vr={key:1},yr={class:"col-span-full",id:"refund_reason"},br={class:"text-sm text-danger mt-1"},gr={class:"flex justify-end mt-4"},xr={class:"form-group"},kr={class:"flex justify-between"},wr=e("div",{class:"flex flex-col",id:"is_save_reason_in_list"},[e("label",{class:"text-base",for:"is_save_reason_in_list1"},"Save In List")],-1),$r={class:"flex justify-end mt-4"},pu=Oe({__name:"index",props:{order:{type:String,default:"view-order"}},setup(S){const u=Gt(),D=m(window.innerWidth);window.addEventListener("resize",()=>{D.value=window.innerWidth});const X=[{title:"Credit",value:"credit"},{title:"Cash",value:"cash"},{title:"Debit",value:"debit"}],E="PPS-POS";document.title=E+" | Order Transactions";const v=m(!1),U=m(null),x=m(!1),k=m(!1),B=m(!1),H=m(!1),M=m(1);ut([v,U],()=>{v.value&&U.value&&U.value.fallbackHandle(),!v.value&&U.value&&U.value.resolveHandle()},{immediate:!0});const N=Jt("api"),G=m([]),p=m(),_=m(null),W=m(null),fe=m(null),be=m(0),J=m(0),A=u.getPosSettings,oe=m(!1),ae=m(!1),ne=m(!1),ie=m(!1),ge=m(null),Y=m({}),he=m(!1),de=m(!1),re=m(""),Z=m(""),ee=m(""),T=m(0),Qe=m(0),Ge=m(0),Je=m(0),je=m(0),me=m(0),Pe=m([]),tt=m({search:"",limit:3,page:1}),b=m({search:"",total_price:"",customer_id:"",tpn:"",transaction_id:"",exact_date:"",id:"",customer_name:"",limit:5,page:1}),vt=[{key:"items",title:"Items"},{key:"amount",title:"Amount"}],r=Zt({is_discounts:!0,is_taxes:!0,is_delivery_fees:!1,refund_type:"items",amount:0,items:[],is_save_reason_in_list:!1,refund_reason:"",payment_method:"cash"}),st=()=>{r.is_discounts=!0,r.is_taxes=!0,r.is_delivery_fees=!1,r.refund_type="items",r.amount=0,r.items=[],r.is_save_reason_in_list=!1,r.refund_reason="",r.payment_method="cash",P.value=[],Y.value={},T.value=0,J.value=0},Se=m(!1),lt=m(!1),Ze=m(!1),xe=m(!1),ve=m(!1),yt=m(!1),Xe=m(!1),Ce=m(!1),P=m([]),Le=async()=>{var i,a;he.value=!0;try{const g=await N.order.getReasons(tt.value);Pe.value=await((i=g==null?void 0:g.data)==null?void 0:i.data),ge.value=await((a=g==null?void 0:g.data)==null?void 0:a.meta)}catch(g){console.log(g)}he.value=!1},bt=async i=>{parseFloat(i.amount)<=me.value?(ee.value="",r.amount=i.amount):ee.value="The Amount field should be less than or equal $"+me.value.toFixed(2)+"."},ot=async()=>{H.value=!1},gt=async()=>{Xe.value=!0;try{r.items.length>0&&(r.amount=0);const i=await N.order.refund(_.value.id,r);i&&(ke(!1,!1),De(i.data.data),B.value=!1,ct(i.data.data.payments.pop()),st(),Yt.fire({icon:"success",padding:"10px",background:"#fff",html:'<span style="font-size:14px">Order refunded successfully</span>'}))}catch(i){console.log(i)}Xe.value=!1},xt=_t(Le,600),at=i=>{var a;return!!((a=r==null?void 0:r.items)!=null&&a.includes(i))},kt=i=>{let a=0;return i.forEach(g=>{r!=null&&r.items.includes(g.id)&&a++}),a===i.length},wt=()=>{de.value=!0,Y.value={},r.refund_reason=""},$t=()=>{r.refund_reason==""?re.value="Reason field is required.":(re.value="",de.value=!1)},Vt=i=>{r.refund_type=i,i=="items"?(r.items=[],P.value=[],Y.value={},T.value=0,Z.value="",ee.value="",me.value=parseFloat((_.value.total_price+Je.value+Ge.value-_.value.tip_amount-je.value).toFixed(2))):me.value=parseFloat((_.value.total_price-_.value.tip_amount-je.value).toFixed(2)),r.amount=me.value},jt=()=>{if(r.is_discounts=!r.is_discounts,P.value.length>0){let i=0,a=0,g=0,V=_.value.total_order_discount+_.value.total_items_discount;_.value.orderItems.forEach(h=>{i+=h.total_discount_applied+h.order_discount_applied}),a=P.value.reduce((h,L)=>h+(L.total_discount_applied+L.order_discount_applied),0);let F=V-i;F>0&&P.value.forEach(h=>{g+=(h.subtotal+h.order_discount_applied)/J.value*F}),r.is_discounts?T.value-=parseFloat((a+g).toFixed(2)):T.value+=parseFloat((a+g).toFixed(2))}Be("is_discounts")},St=()=>{if(r.is_taxes=!r.is_taxes,P.value.length>0){let i=0;P.value.forEach(a=>{i+=a.total_taxes}),r.is_taxes?T.value+=i:T.value-=i}Be("is_taxes")},Ct=()=>{if(r.is_delivery_fees=!r.is_delivery_fees,P.value.length>0){let i=0;_.value.delivery_fee_amount>0&&P.value.forEach(a=>{i+=(a.subtotal+a.order_discount_applied)/J.value*_.value.delivery_fee_amount}),r.is_delivery_fees?T.value+=i:T.value-=i}Be("is_delivery_fees")},De=async i=>{if(_.value=i,_.value&&i.payments.length>0&&(je.value=i.payments.reduce((a,g)=>g.status=="refunded"?a+g.total_amount:0,0)),_.value&&i.orderItems.length>0){be.value=i.orderItems.reduce((g,V)=>g+V.subtotal,0);let a=i.orderItems.reduce((g,V)=>g+(V.total_discount_applied+V.order_discount_applied),0);Qe.value=_.value.total_order_discount+_.value.total_items_discount-a}},Rt=async()=>{st(),B.value=!0,M.value=1;let i=0,a=0,g=_.value.total_order_discount+_.value.total_items_discount;_.value.orderItems.forEach(h=>{J.value+=h.subtotal+h.order_discount_applied,i+=h.total_discount_applied+h.order_discount_applied});let V=g-i;Je.value=V,V>0&&_.value.orderItems.filter(h=>h.is_refunded===!1).forEach(h=>{a+=(h.subtotal+h.order_discount_applied)/J.value*V});let F=_.value.orderItems.filter(h=>h.is_refunded===!1).reduce((h,L)=>h+(L.total_discount_applied+L.order_discount_applied),0);Ge.value=F,me.value=parseFloat((_.value.total_price+Je.value+Ge.value-_.value.tip_amount-je.value).toFixed(2)),r.amount=(_.value.total_price+a+F-_.value.tip_amount-je.value).toFixed(2)},nt=i=>{var F,h;let a=i.total_modifiers+i.amount*i.quantity,g=0,V=0;if(r.items){if(_.value.orderItems.forEach(K=>{g+=K.total_discount_applied+K.order_discount_applied}),r.is_discounts){let K=i.total_discount_applied+i.order_discount_applied,Ae=_.value.total_order_discount+_.value.total_items_discount-g;Ae>0&&(V=(i.subtotal+i.order_discount_applied)/J.value*Ae),a-=K+V}if(r.is_taxes&&(a+=i.total_taxes),r.is_delivery_fees&&_.value.delivery_fee_amount>0){let K=0;K=(i.subtotal+i.order_discount_applied)/J.value*_.value.delivery_fee_amount,a+=K}if(!((F=r.items)==null?void 0:F.includes(i.id)))T.value+=a,P.value.push(i),r.items.push(i.id);else{const K=(h=r.items)==null?void 0:h.findIndex(Ee=>Ee===i.id);K!==-1&&(r.items.splice(K,1),P.value.splice(K,1),T.value-=a)}}else r.items=[i.id],P.value=[i],T.value=a},Ft=i=>{if(r.items.length==i.length)r.items=[],P.value=[],T.value=0;else{r.items=[],P.value=[],T.value=0,i.forEach(h=>{P.value.push(h),r.items.push(h.id)});let a=P.value.reduce((h,L)=>h+(L.total_modifiers+L.amount*L.quantity),0),g=_.value.total_order_discount+_.value.total_items_discount;r.is_discounts&&(T.value-=parseFloat(g.toFixed(2)));let V=0,F=0;P.value.forEach(h=>{V+=h.total_taxes,_.value.delivery_fee_amount>0&&(F+=(h.subtotal+h.order_discount_applied)/J.value*_.value.delivery_fee_amount)}),r.is_taxes&&(a+=V),r.is_delivery_fees&&(a+=F),T.value+=a}};ut(()=>T.value,i=>{i!=0?r.refund_type=="items"&&(i.toFixed(2)<=me.value?Z.value="":Z.value="The selection items amount should be less than or equal $"+r.amount+"."):Z.value=""},{immediate:!0});const Te=i=>{i==2?r.refund_type=="items"?r.items.length==0||Z.value!=""?(Z.value=Z.value!=""?Z.value:"The items field is required when refund type is items.",i=1):(Le(),Z.value=""):r.amount==0||ee.value!=""?(ee.value=ee.value!=""?ee.value:"The Amount field is required when refund type is amount.",i=1):(Le(),ee.value=""):i==3&&(r.refund_reason==""?(re.value="The reason field is required.",i=2):re.value=""),M.value=i},It=()=>{r.is_save_reason_in_list=!r.is_save_reason_in_list,Be("is_save_reason_in_list")},Ot=async()=>{fe.value.current_page<fe.value.last_page&&(b.value.page++,xe.value=!0,ke(!0,!1))},Pt=async()=>{(b.value.customer_id!=""||b.value.total_price!=""||b.value.tpn!=""||b.value.transaction_id!=""||b.value.exact_date!=""||b.value.id!="")&&(Ze.value=!0)},Lt=async i=>{let a=(i.first_name?i.first_name+" ":"")+(i.last_name?i.last_name:"");!i.first_name&&!i.last_name&&(a=i.phone),b.value.customer_name=a,b.value.customer_id=i.id,dt()},Dt=async()=>{ve.value=!0},Tt=async()=>{ve.value=!1},it=async()=>{b.value.search="",b.value.total_price="",b.value.customer_id="",b.value.customer_name="",b.value.tpn="",b.value.exact_date="",b.value.id="",b.value.transaction_id="",ve.value=!1,Ze.value=!1,b.value.page=1,ke(!1,!0)},Et=async()=>{ke(!1,!0),Pt(),ve.value=!1},At=_t(i=>{b.value.search=i,b.value.page=1,ke(!1,!0),xe.value=!1},600),ke=async(i,a)=>{var g,V,F;try{xe.value||(Se.value=!0);const h=await N.order.getOrders(b.value);(b.value.search!=""||b.value.search=="")&&i?(g=h.data)==null||g.data.forEach(L=>{G.value.push(L)}):G.value=(V=h==null?void 0:h.data)==null?void 0:V.data,a&&De(G.value[0]),fe.value=(F=h==null?void 0:h.data)==null?void 0:F.meta,xe.value?xe.value=!1:Se.value=!1}catch(h){console.log(h)}},zt=async()=>{var a;let i=!0;try{const g=new URL(window.location.href),V=new URLSearchParams(g.search);if(V.has("id")&&V.get("id")!=""){Se.value=!0;const F=await N.order.show(V.get("id"));let h=(a=F==null?void 0:F.data)==null?void 0:a.data;h&&(De(h),i=!1),Se.value=!1}}catch(g){console.log(g)}ke(!1,i)},Ut=async i=>{Y.value=i,r.refund_reason=i.reason},Bt=async()=>{Ce.value=!0},dt=async()=>{Ce.value=!1},Mt=async(i,a)=>{x.value=!0,W.value=a,rt(i)},ct=async i=>{H.value=!0,W.value=i},Nt=async(i,a)=>{oe.value=!1,ae.value=!1,ne.value=!1,ie.value=!1,k.value=!0,W.value=a,rt(i)},qt=async()=>{x.value=!1},Ht=async()=>{k.value=!1},rt=async i=>{try{lt.value=!0;const a=await N.order.getReciptsByOrderStatus(i);p.value=a==null?void 0:a.data,lt.value=!1}catch(a){console.log(a)}};return zt(),(i,a)=>{const g=ns,V=Ke("IconBtn"),F=Ke("RouterView"),h=mt,L=ht,K=vs,Ee=ts,Ae=ft("print");return l(),o($,null,[e("section",null,[e("div",ca,[e("div",ra,[n(g,{color:t(We),class:"w-[20px] h-[20px] m-auto"},null,8,["color"])]),ua]),e("div",_a,[n(Il,{isLoading:t(Se),isShowMore:t(xe),metaObj:t(fe),orders:t(G),onCallSelectCurrentOrder:De,onCallNextPage:Ot,onCallSearchOrders:t(At),onCallOpenFilter:Dt,onCallResetFilter:it,posSetting:t(A),parameters:t(b),isEmptyParameters:t(Ze),order:t(_)},null,8,["isLoading","isShowMore","metaObj","orders","onCallSearchOrders","posSetting","parameters","isEmptyParameters","order"]),t(_)?(l(),o("div",pa,[n(F,null,{default:c(()=>[(l(),C(Xt,{timeout:0,onFallback:a[0]||(a[0]=s=>v.value=!0),onResolve:a[1]||(a[1]=s=>v.value=!1)},{default:c(()=>[n(se,{height:"635",class:"d-flex flex-column"},{default:c(()=>[n(t(ye),{options:{wheelPropagation:!1}},{default:c(()=>[t(_)?(l(),C($e,{key:0,class:"ma-0"},{default:c(()=>[n(Ve,{cols:"12",class:"border-t pa-4 shortcut-icon"},{default:c(()=>[fa,ha,e("div",ma,[e("div",va,[e("h6",ya,[ba,y(" - "+d(t(_).status=="cancel"?"Canceled":t(_).status),1)]),e("small",ga,[xa,e("span",ka,d((t(A)&&t(A).order_prefix?t(A).order_prefix:"#")+t(_).id),1)])]),e("div",wa,[e("div",$a,[e("div",Va,[e("small",ja,[Sa,y(" "+d(t(_).created_at)+" "+d(t(_).created_time_at),1)]),e("h6",Ca," $"+d(("makeFLoat"in i?i.makeFLoat:t(pe))(t(_).total_price,"")),1)])])])])]),_:1})]),_:1})):f("",!0),n(et),t(_).payments.length>0?(l(),C($e,{key:1,class:"ma-0 mt-n1"},{default:c(()=>[n(Ve,{cols:"12",class:"border-t pa-4 shortcut-icon"},{default:c(()=>[Ra,Fa,(l(!0),o($,null,j(t(_).payments,(s,I)=>(l(),o("div",Ia,[e("div",Oa,[e("h6",Pa,[s.status!="refunded"?(l(),o("span",La,"Sale")):s.status=="refunded"?(l(),o("span",Da,"Refunded")):f("",!0),y(" - "+d(s.payment_method),1)]),e("small",Ta,[Ea,e("span",Aa,"#"+d(s.id),1)])]),e("div",za,[e("div",Ua,[e("div",Ba,[e("small",Ma,[Na,y(" "+d(s.created_at)+" "+d(s.created_time_at),1)]),e("h6",qa," $"+d(s.total_amount.toFixed(2)),1)]),s.status!="refunded"?(l(),o("div",Ha,[n(V,{onClick:O=>Mt(t(_).status,s),variant:"elevated",style:{"background-color":"#e9f5fe",color:"#2196f3"}},{default:c(()=>[n(He,{icon:"tabler-receipt",size:"25"})]),_:2},1032,["onClick"]),n(V,{onClick:O=>Nt(t(_).status,s),variant:"elevated",style:{"background-color":"#f8cfcb",color:"#ea5455"}},{default:c(()=>[n(He,{icon:"tabler-printer",size:"25"})]),_:2},1032,["onClick"])])):(l(),o("div",Ka,[n(V,{onClick:O=>ct(s),variant:"elevated",style:{"background-color":"#e9f5fe",color:"#2196f3"}},{default:c(()=>[n(He,{icon:"tabler-receipt",size:"25"})]),_:2},1032,["onClick"])]))])])]))),256))]),_:1})]),_:1})):f("",!0),n(et),t(_).orderItems.length>0?(l(),C($e,{key:2,class:"ma-0 mt-n1"},{default:c(()=>[n(Ve,{cols:"12",class:"border-t pa-4 shortcut-icon"},{default:c(()=>[Wa,Qa,(l(!0),o($,null,j(t(_).orderItems,(s,I)=>{var O,R;return l(),o("div",Ga,[s.type=="item"?(l(),o("div",Ja,[e("img",{src:(O=s==null?void 0:s.product)!=null&&O.image?(R=s==null?void 0:s.product)==null?void 0:R.image:t(le),class:"w-[40px] h-[40px] rounded"},null,8,Za),e("div",Xa,[e("h6",Ya,[e("span",null,d(s.name),1)]),e("small",en,[e("span",tn,[s.product.categories.length>5?(l(),o("span",sn,[(l(!0),o($,null,j(s.product.categories.slice(0,5),(w,Q)=>(l(),o("span",null,[e("span",ln,d(w.name),1),Q!=Object.keys(s.product.categories.slice(0,5)).length-1?(l(),o("span",on," - ")):(l(),o("span",an,", ....")),n(Fe,{"open-delay":"500",location:"top",activator:"parent"},{default:c(()=>[(l(!0),o($,null,j(s.product.categories.slice(0,10),(te,ze)=>(l(),o("span",null,[e("span",null,d(te.name),1),ze!=Object.keys(s.product.categories.slice(0,10)).length-1?(l(),o("span",nn," , ")):f("",!0)]))),256))]),_:2},1024)]))),256))])):s.product.categories.length<=5?(l(),o("span",dn,[(l(!0),o($,null,j(s.product.categories.slice(0,5),(w,Q)=>(l(),o("span",null,[e("span",cn,[y(d(w.name)+" ",1),Q!=Object.keys(s.product.categories.slice(0,5)).length-1?(l(),o("span",rn," - ")):f("",!0)])]))),256))])):f("",!0)])])])])):(l(),o("div",un,[e("img",{src:t(le),class:"w-[40px] h-[40px] rounded"},null,8,_n),e("div",pn,[e("h6",fn,[e("span",null,d((s==null?void 0:s.name)??"Manual Entry"),1)])])])),e("div",hn,[e("div",mn,[e("small",vn,[yn,y(" "+d(s.created_time_at),1)]),e("h6",bn," $"+d(("makeFLoat"in i?i.makeFLoat:t(pe))(s.total_amount,"")),1),s.total_taxes>0?(l(),o("h6",gn," taxable: $"+d(s.total_taxes),1)):f("",!0),s.is_refunded?(l(),o("span",xn," Refunded ")):f("",!0)])])])}),256))]),_:1})]),_:1})):f("",!0),n($e,{class:"ma-0 mt-n1 rounded"},{default:c(()=>[n(Ve,{cols:"12",class:"rounded border-t pa-4 shortcut-icon"},{default:c(()=>[e("div",kn,[wn,e("h6",$n," $"+d(t(be).toFixed(2)),1)]),e("div",Vn,[jn,e("h6",Sn," - $"+d(t(Qe).toFixed(2)),1)]),e("div",Cn,[Rn,e("h6",Fn," $"+d((t(be)-t(Qe)).toFixed(2)),1)]),e("div",In,[On,e("h6",Pn," $"+d(t(_).total_items_taxes),1)]),t(_).tip_amount>0?(l(),o("div",Ln,[Dn,e("h6",Tn," $"+d(t(_).tip_amount),1)])):f("",!0),t(_).delivery_fee_amount>0?(l(),o("div",En,[An,e("h6",zn," $"+d(t(_).delivery_fee_amount),1)])):f("",!0),Un,e("div",Bn,[Mn,e("h6",Nn," $"+d(t(_).total_price),1)])]),_:1})]),_:1}),n(et)]),_:1}),t(_).status!="refunded"?(l(),C(we,{key:0,class:"py-2 mt-auto"},{append:c(()=>[e("div",qn,[n(z,{color:"primary",onClick:Rt},{default:c(()=>[y("Refund")]),_:1})])]),_:1})):f("",!0)]),_:1})]),_:1}))]),_:1})])):f("",!0)])]),n(_e,{modelValue:t(ve),"onUpdate:modelValue":a[10]||(a[10]=s=>q(ve)?ve.value=s:null),width:"500"},{default:c(()=>[n(h,{onClick:a[2]||(a[2]=s=>Tt())}),n(se,null,{default:c(()=>[e("div",Hn,[e("div",Kn,[n(L,{modelValue:t(b).total_price,"onUpdate:modelValue":a[3]||(a[3]=s=>t(b).total_price=s),label:"Amount",placeholder:"Type Here...",type:"number"},null,8,["modelValue"])]),e("div",Wn,[n(L,{onClick:a[4]||(a[4]=s=>Bt()),modelValue:t(b).customer_name,"onUpdate:modelValue":a[5]||(a[5]=s=>t(b).customer_name=s),label:"Consumer",placeholder:"Type Here...",type:"text"},null,8,["modelValue"])]),e("div",Qn,[n(L,{modelValue:t(b).tpn,"onUpdate:modelValue":a[6]||(a[6]=s=>t(b).tpn=s),label:"TPN",placeholder:"Type Here..."},null,8,["modelValue"])]),e("div",Gn,[n(L,{modelValue:t(b).transaction_id,"onUpdate:modelValue":a[7]||(a[7]=s=>t(b).transaction_id=s),label:"Reference Id",placeholder:"Type Here...",type:"number",min:0},null,8,["modelValue"])]),e("div",Jn,[n(t(is),{modelValue:t(b).exact_date,"onUpdate:modelValue":a[8]||(a[8]=s=>t(b).exact_date=s),label:"Date",placeholder:"Select Date",config:{inline:!0}},null,8,["modelValue"])]),e("div",Zn,[n(L,{modelValue:t(b).id,"onUpdate:modelValue":a[9]||(a[9]=s=>t(b).id=s),label:"Order",placeholder:"Type Here...",hasInnerLabel:!0,innerLabelValue:t(A)&&t(A).order_prefix?t(A).order_prefix:"#",type:"number",min:0},null,8,["modelValue","innerLabelValue"])]),e("div",Xn,[n(z,{color:"warning",onClick:it},{default:c(()=>[y("Drop Filter")]),_:1}),y("     "),n(z,{class:"flex",onClick:Et},{default:c(()=>[t(yt)?(l(),C(t(Me),{key:0,icon:"tail-spin",color:"white",class:"w-4 h-4 m-auto"})):(l(),o("span",Yn,"Ok"))]),_:1})])])]),_:1})]),_:1},8,["modelValue"]),n(_e,{modelValue:t(Ce),"onUpdate:modelValue":a[12]||(a[12]=s=>q(Ce)?Ce.value=s:null),width:"800"},{default:c(()=>[n(h,{onClick:a[11]||(a[11]=s=>dt())}),n(se,null,{default:c(()=>[n(ds,{isCustomerSelection:!0,onCallSaveSelection:Lt})]),_:1})]),_:1},8,["modelValue"]),n(_e,{modelValue:t(x),"onUpdate:modelValue":a[14]||(a[14]=s=>q(x)?x.value=s:null),width:"500"},{default:c(()=>[n(h,{onClick:a[13]||(a[13]=s=>qt())}),n(se,{class:"md:py-8 md:px-5"},{default:c(()=>{var s,I,O,R,w;return[n(we,{class:"text-center"},{default:c(()=>[n(Re,{class:"text-h3"},{default:c(()=>[y(" All Receipts ")]),_:1})]),_:1}),(s=t(p))!=null&&s.customer||(I=t(p))!=null&&I.precheck||(O=t(p))!=null&&O.merchant||(R=t(p))!=null&&R.terminal||(w=t(p))!=null&&w["kitchen-bar"]?(l(),C(ue,{key:0},{default:c(()=>[n(Xl,{receipts:t(p),order:t(_),posSetting:t(A),transaction:t(W)},null,8,["receipts","order","posSetting","transaction"])]),_:1})):(l(),C(ue,{key:1},{default:c(()=>[ei]),_:1}))]}),_:1})]),_:1},8,["modelValue"]),n(_e,{modelValue:t(k),"onUpdate:modelValue":a[20]||(a[20]=s=>q(k)?k.value=s:null),width:"550"},{default:c(()=>[n(h,{onClick:a[15]||(a[15]=s=>Ht())}),n(se,{class:"md:py-8 md:px-5"},{default:c(()=>{var s,I,O,R;return[n(we,{class:"text-center"},{default:c(()=>[n(Re,{class:"text-h3"},{default:c(()=>[y(" Choose Receipts To Print ")]),_:1})]),_:1}),(s=t(p))!=null&&s.customer||(I=t(p))!=null&&I.merchant||(O=t(p))!=null&&O.terminal||(R=t(p))!=null&&R["kitchen-bar"]?(l(),C(ue,{key:0},{default:c(()=>[e("div",ti,[t(p).customer!=null?(l(),o("div",si,[n(Ne,{label:"Customer",modelValue:t(oe),"onUpdate:modelValue":a[16]||(a[16]=w=>q(oe)?oe.value=w:null)},null,8,["modelValue"])])):f("",!0),t(p).merchant!=null?(l(),o("div",li,[n(Ne,{label:"Merchant",modelValue:t(ae),"onUpdate:modelValue":a[17]||(a[17]=w=>q(ae)?ae.value=w:null)},null,8,["modelValue"])])):f("",!0),t(p)["kitchen-bar"]!=null?(l(),o("div",oi,[n(Ne,{label:"Kitchen-bar",modelValue:t(ie),"onUpdate:modelValue":a[18]||(a[18]=w=>q(ie)?ie.value=w:null)},null,8,["modelValue"])])):f("",!0),t(p).terminal!=null?(l(),o("div",ai,[n(Ne,{label:"Terminal",modelValue:t(ne),"onUpdate:modelValue":a[19]||(a[19]=w=>q(ne)?ne.value=w:null)},null,8,["modelValue"])])):f("",!0)]),ni,!t(oe)&&!t(ae)&&!t(ne)&&!t(ie)?(l(),C(z,{key:0,color:"warning",disabled:!0},{default:c(()=>[y("Print")]),_:1})):pt((l(),C(z,{key:1,color:"warning"},{default:c(()=>[y("Print")]),_:1})),[[Ae,"#section-to-print"]]),e("div",ii,[e("div",null,[di,n(ue,null,{default:c(()=>{var w,Q,te,ze;return[t(oe)?(l(),o("div",ci,[ri,ui,_i,n(ce,{type:"customer",receipt:(w=t(p))==null?void 0:w.customer,order:t(_),transaction:t(W),posSetting:t(A),class:"md:w-[265px] mx-auto lg:w-auto"},null,8,["receipt","order","transaction","posSetting"])])):f("",!0),t(ae)?(l(),o("div",pi,[fi,hi,mi,n(ce,{type:"merchant",receipt:(Q=t(p))==null?void 0:Q.merchant,order:t(_),transaction:t(W),posSetting:t(A),class:"md:w-[265px] mx-auto lg:w-auto"},null,8,["receipt","order","transaction","posSetting"])])):f("",!0),t(ie)?(l(),o("div",vi,[yi,bi,gi,n(ce,{type:"kitchen-bar",receipt:(te=t(p))==null?void 0:te["kitchen-bar"],order:t(_),transaction:t(W),posSetting:t(A),class:"md:w-[265px] mx-auto lg:w-auto"},null,8,["receipt","order","transaction","posSetting"])])):f("",!0),t(ne)?(l(),o("div",xi,[ki,wi,$i,n(ce,{type:"terminal",receipt:(ze=t(p))==null?void 0:ze.terminal,order:t(_),transaction:t(W),posSetting:t(A),class:"md:w-[265px] mx-auto lg:w-auto"},null,8,["receipt","order","transaction","posSetting"])])):f("",!0)]}),_:1})])])]),_:1})):(l(),C(ue,{key:1},{default:c(()=>[Vi]),_:1}))]}),_:1})]),_:1},8,["modelValue"]),n(_e,{modelValue:t(B),"onUpdate:modelValue":a[36]||(a[36]=s=>q(B)?B.value=s:null),width:"550"},{default:c(()=>[n(h,{onClick:a[21]||(a[21]=s=>B.value=!1)}),n(se,{class:"md:py-8 md:px-5"},{default:c(()=>[n(we,{class:"text-center"},{default:c(()=>[n(Re,{class:"text-h3"},{default:c(()=>[y(" Refund "),e("span",ji,d(t(r).refund_type),1)]),_:1})]),_:1}),n(ue,null,{default:c(()=>[t(M)==1?(l(),o("div",Si,[e("div",Ci,[e("div",Ri,[e("div",Fi,[Ii,e("div",null,[n(qe,{onClick:a[22]||(a[22]=s=>jt()),class:"cursor-pointer",modelValue:t(r).is_discounts,"onUpdate:modelValue":a[23]||(a[23]=s=>t(r).is_discounts=s),id:"is_discounts1",color:"success"},null,8,["modelValue"])])])]),e("div",Oi,[e("div",Pi,[Li,e("div",null,[n(qe,{onClick:a[24]||(a[24]=s=>St()),class:"cursor-pointer",modelValue:t(r).is_taxes,"onUpdate:modelValue":a[25]||(a[25]=s=>t(r).is_taxes=s),id:"is_taxes1",color:"success"},null,8,["modelValue"])])])]),e("div",Di,[e("div",Ti,[Ei,e("div",null,[n(qe,{onClick:a[26]||(a[26]=s=>Ct()),class:"cursor-pointer",modelValue:t(r).is_delivery_fees,"onUpdate:modelValue":a[27]||(a[27]=s=>t(r).is_delivery_fees=s),id:"is_delivery_fees1",color:"success"},null,8,["modelValue"])])])])]),Ai,e("div",zi,[e("div",Ui,[(l(),o($,null,j(vt,s=>e("button",{class:Ie(["p-2 rounded text-black",t(r).refund_type===s.key?"bg-primary text-white":"bg-secondary text-primary"]),key:s.key,onClick:I=>Vt(s.key)},d(s.title),11,Bi)),64))])]),e("div",Mi,[t(r).refund_type=="amount"?(l(),o("div",Ni,[n(cs,{amount:t(r).amount,"item-to-edit":{},onSave:bt,"is-loading":!1,"is-refund":!0},null,8,["amount"]),e("div",{class:"v-input__details",style:Ue(t(ee)!=""?"display:block":"display:none")},[e("div",qi,d(t(ee)),1)],4)])):f("",!0),Hi,t(r).refund_type=="items"?(l(),o("div",Ki,[e("p",Wi," $"+d(parseFloat(t(T).toFixed(2))),1),e("div",Qi,[e("label",{class:"flex justify-between items-center cursor-pointer",for:"item",onClick:a[28]||(a[28]=s=>Ft(t(_).orderItems.filter(I=>I.is_refunded===!1)))},[y(" All Items   "),e("div",Gi,[n(t(Ye),{checked:kt(t(_).orderItems.filter(s=>s.is_refunded===!1)),style:{width:"32px",height:"27px","border-radius":"17px !important"}},null,8,["checked"])])])]),Ji,Zi,n(t(ye),{options:{wheelPropagation:!1}},{default:c(()=>[e("div",Xi,[(l(!0),o($,null,j(t(_).orderItems.filter(s=>s.is_refunded===!1),s=>{var I,O;return l(),o("div",Yi,[s.type=="item"?(l(),o("div",ed,[e("img",{src:(I=s==null?void 0:s.product)!=null&&I.image?(O=s==null?void 0:s.product)==null?void 0:O.image:t(le),class:"w-[40px] h-[40px] rounded"},null,8,td),e("div",sd,[e("h6",ld,[e("span",null,d(s.name),1)]),e("small",od,[e("span",ad,[s.product.categories.length>5?(l(),o("span",nd,[(l(!0),o($,null,j(s.product.categories.slice(0,5),(R,w)=>(l(),o("span",null,[e("span",id,d(R.name),1),w!=Object.keys(s.product.categories.slice(0,5)).length-1?(l(),o("span",dd," - ")):(l(),o("span",cd," ....")),n(Fe,{"open-delay":"500",location:"top",activator:"parent"},{default:c(()=>[(l(!0),o($,null,j(s.product.categories.slice(0,10),(Q,te)=>(l(),o("span",null,[e("span",null,d(Q.name),1),te!=Object.keys(s.product.categories.slice(0,10)).length-1?(l(),o("span",rd," , ")):f("",!0)]))),256))]),_:2},1024)]))),256))])):s.product.categories.length<=5?(l(),o("span",ud,[(l(!0),o($,null,j(s.product.categories.slice(0,5),(R,w)=>(l(),o("span",null,[e("span",_d,[y(d(R.name)+" ",1),w!=Object.keys(s.product.categories.slice(0,5)).length-1?(l(),o("span",pd," - ")):f("",!0)])]))),256))])):f("",!0)])])])])):(l(),o("div",fd,[e("img",{src:t(le),class:"w-[40px] h-[40px] rounded"},null,8,hd),e("div",md,[e("h6",vd,[e("span",null,d((s==null?void 0:s.name)??"Manual Entry"),1)])])])),e("div",yd,[bd,e("div",gd,[e("small",xd,[kd,y(" "+d(s.created_time_at),1)]),e("h6",wd," $"+d(("makeFLoat"in i?i.makeFLoat:t(pe))(s.quantity*s.amount+s.total_modifiers,"")),1),s.is_refunded?(l(),o("span",$d," Refunded ")):f("",!0)]),s.is_refunded?f("",!0):(l(),o("div",Vd,[(l(),o("label",{class:"flex justify-between items-center cursor-pointer",key:s.id,for:`item-${s.id}`,onClick:R=>nt(s)},[e("div",Sd,[n(t(Ye),{checked:at(s.id),style:{width:"32px",height:"27px","border-radius":"17px !important"}},null,8,["checked"])])],8,jd))]))])])}),256))])]),_:1}),e("div",{class:"v-input__details",style:Ue(t(Z)!=""?"display:block":"display:none")},[e("div",Cd,d(t(Z)),1)],4),Rd,t(_).orderItems.filter(s=>s.is_refunded===!0).length>0?(l(),o("div",Fd," Not Available For Refund ")):f("",!0),n(t(ye),{options:{wheelPropagation:!1}},{default:c(()=>[e("div",Id,[(l(!0),o($,null,j(t(_).orderItems.filter(s=>s.is_refunded===!0),s=>{var I,O;return l(),o("div",Od,[s.type=="item"?(l(),o("div",Pd,[e("img",{src:(I=s==null?void 0:s.product)!=null&&I.image?(O=s==null?void 0:s.product)==null?void 0:O.image:t(le),class:"w-[40px] h-[40px] rounded"},null,8,Ld),e("div",Dd,[e("h6",Td,[e("span",null,d(s.name),1)]),e("small",Ed,[e("span",Ad,[s.product.categories.length>5?(l(),o("span",zd,[(l(!0),o($,null,j(s.product.categories.slice(0,5),(R,w)=>(l(),o("span",null,[e("span",Ud,d(R.name),1),w!=Object.keys(s.product.categories.slice(0,5)).length-1?(l(),o("span",Bd," - ")):(l(),o("span",Md," ....")),n(Fe,{"open-delay":"500",location:"top",activator:"parent"},{default:c(()=>[(l(!0),o($,null,j(s.product.categories.slice(0,10),(Q,te)=>(l(),o("span",null,[e("span",null,d(Q.name),1),te!=Object.keys(s.product.categories.slice(0,10)).length-1?(l(),o("span",Nd," , ")):f("",!0)]))),256))]),_:2},1024)]))),256))])):s.product.categories.length<=5?(l(),o("span",qd,[(l(!0),o($,null,j(s.product.categories.slice(0,5),(R,w)=>(l(),o("span",null,[e("span",Hd,[y(d(R.name)+" ",1),w!=Object.keys(s.product.categories.slice(0,5)).length-1?(l(),o("span",Kd," - ")):f("",!0)])]))),256))])):f("",!0)])])])])):(l(),o("div",Wd,[e("img",{src:t(le),class:"w-[40px] h-[40px] rounded"},null,8,Qd),e("div",Gd,[e("h6",Jd,[e("span",null,d((s==null?void 0:s.name)??"Manual Entry"),1)])])])),e("div",Zd,[Xd,e("div",Yd,[e("small",ec,[tc,y(" "+d(s.created_time_at),1)]),e("h6",sc," $"+d(("makeFLoat"in i?i.makeFLoat:t(pe))(s.quantity*s.amount+s.total_modifiers,"")),1),s.is_refunded?(l(),o("span",lc," Refunded ")):f("",!0)]),s.is_refunded?f("",!0):(l(),o("div",oc,[(l(),o("label",{class:"flex justify-between items-center cursor-pointer",key:s.id,for:`item-${s.id}`,onClick:R=>nt(s)},[e("div",nc,[n(t(Ye),{checked:at(s.id),style:{width:"32px",height:"27px","border-radius":"17px !important"}},null,8,["checked"])])],8,ac))]))])])}),256))])]),_:1})])):f("",!0)]),e("div",ic,[e("div",dc,[n(z,{class:"btn btn-primary w-fit px-8",onClick:a[29]||(a[29]=s=>Te(2))},{default:c(()=>[t(he)?(l(),C(t(Me),{key:0,icon:"tail-spin",color:"white",class:"w-4 h-4 m-auto"})):(l(),o("span",cc,"Next"))]),_:1})])])])):f("",!0),t(M)==2?(l(),o("div",rc,[e("div",uc,[e("div",_c,[n(L,{isSearchBox:!0,type:"text",modelValue:t(b).search,"onUpdate:modelValue":a[30]||(a[30]=s=>t(b).search=s),placeholder:"Search Operators",onKeyup:t(xt)},null,8,["modelValue","onKeyup"]),y("   "),n(z,{onClick:wt,type:"button",class:"w-20 p-4 rounded-lg shadow flex gap-4 text-center"},{default:c(()=>[y("Add")]),_:1})]),e("div",pc,[t(he)&&!t(Pe).length?(l(),o("div",fc,[n(t(Me),{icon:"tail-spin",class:"w-6 h-6 m-auto",color:"orange"})])):t(Pe).length?(l(),o("div",hc,[(l(!0),o($,null,j(t(Pe),s=>(l(),o("div",{style:{height:"86px"},class:Ie(["p-4 rounded-lg shadow flex items-center justify-between gap-4 cursor-pointer",{"bg-secondary dark:!bg-slate-600 text-primary":t(Y).id===s.id,"bg-[#f8f7fa] dark:bg-darkmode-bg":t(Y).id!==s.id}]),onClick:I=>Ut(s)},[e("div",vc,[e("h6",yc,[e("span",null,d(s.reason),1)])]),e("div",bc,[(l(),o("svg",gc,[xc,e("path",{d:"M20 12L26 17.5714L20 23.1429",stroke:t(Y).id===s.id?t(We):"#2196F3","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,8,kc)]))])],10,mc))),256)),t(ge)?(l(),o("div",wc,[n(rs,{onPageChanged:a[31]||(a[31]=s=>{t(tt).page=s,Le()}),meta:t(ge),class:"w-full sm:w-auto sm:mr-auto"},null,8,["meta"])])):f("",!0)])):(l(),o("div",$c,"No Reasons found"))]),e("div",{class:"v-input__details",style:Ue(t(re)!=""?"display:block":"display:none")},[e("div",Vc,d(t(re)),1)],4)]),e("div",jc,[e("div",Sc,[n(z,{onClick:a[32]||(a[32]=s=>Te(1)),class:"btn btn-secondary w-fit px-8"},{default:c(()=>[y(" Previous")]),_:1})]),e("div",Cc,[n(z,{onClick:a[33]||(a[33]=s=>Te(3)),class:"btn btn-primary w-fit px-8"},{default:c(()=>[y(" Next")]),_:1})])])])):f("",!0),t(M)==3?(l(),o("div",Rc,[t(r).items.length==0?(l(),o("p",Fc," $"+d(t(r).amount),1)):(l(),o("p",Ic," $"+d(t(T).toFixed(2)),1)),e("div",Oc,[Pc,Lc,n(K,{"selected-radio":t(r).payment_method,"onUpdate:selectedRadio":a[34]||(a[34]=s=>t(r).payment_method=s),"radio-content":X,"grid-column":{sm:"4",cols:"12"}},null,8,["selected-radio"]),Dc,Tc,e("p",null,d(t(r).refund_reason),1),t(P).length?(l(),o("div",Ec,[Ac,zc,n(t(ye),{options:{wheelPropagation:!1}},{default:c(()=>[e("div",Uc,[(l(!0),o($,null,j(t(P),s=>{var I,O;return l(),o("div",Bc,[s.type=="item"?(l(),o("div",Mc,[e("img",{src:(I=s==null?void 0:s.product)!=null&&I.image?(O=s==null?void 0:s.product)==null?void 0:O.image:t(le),class:"w-[40px] h-[40px] rounded"},null,8,Nc),e("div",qc,[e("h6",Hc,[e("span",null,d(s.name),1)]),e("small",Kc,[e("span",Wc,[s.product.categories.length>5?(l(),o("span",Qc,[(l(!0),o($,null,j(s.product.categories.slice(0,5),(R,w)=>(l(),o("span",null,[e("span",Gc,d(R.name),1),w!=Object.keys(s.product.categories.slice(0,5)).length-1?(l(),o("span",Jc," - ")):(l(),o("span",Zc," ....")),n(Fe,{"open-delay":"500",location:"top",activator:"parent"},{default:c(()=>[(l(!0),o($,null,j(s.product.categories.slice(0,10),(Q,te)=>(l(),o("span",null,[e("span",null,d(Q.name),1),te!=Object.keys(s.product.categories.slice(0,10)).length-1?(l(),o("span",Xc," , ")):f("",!0)]))),256))]),_:2},1024)]))),256))])):s.product.categories.length<=5?(l(),o("span",Yc,[(l(!0),o($,null,j(s.product.categories.slice(0,5),(R,w)=>(l(),o("span",null,[e("span",er,[y(d(R.name)+" ",1),w!=Object.keys(s.product.categories.slice(0,5)).length-1?(l(),o("span",tr," - ")):f("",!0)])]))),256))])):f("",!0)])])])])):(l(),o("div",sr,[e("img",{src:t(le),class:"w-[40px] h-[40px] rounded"},null,8,lr),e("div",or,[e("h6",ar,[e("span",null,d((s==null?void 0:s.name)??"Manual Entry"),1)])])])),e("div",nr,[ir,e("div",dr,[e("small",cr,[rr,y(" "+d(s.created_time_at),1)]),e("h6",ur," $"+d(("makeFLoat"in i?i.makeFLoat:t(pe))(s.total_amount,"")),1),s.is_refunded?(l(),o("span",_r," Refunded ")):f("",!0)])])])}),256))])]),_:1})])):f("",!0),pr,e("div",fr,[e("div",hr,[n(z,{onClick:a[35]||(a[35]=s=>Te(2)),class:"btn btn-secondary w-fit px-8"},{default:c(()=>[y(" Previous")]),_:1})]),e("div",mr,[n(z,{class:"btn btn-primary w-fit px-8",onClick:gt},{default:c(()=>[t(Xe)?(l(),C(t(Me),{key:0,icon:"tail-spin",color:"white",class:"w-4 h-4 m-auto"})):(l(),o("span",vr,"Refund"))]),_:1})])])])])):f("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(_e,{modelValue:t(de),"onUpdate:modelValue":a[41]||(a[41]=s=>q(de)?de.value=s:null),width:"550"},{default:c(()=>[n(h,{onClick:a[37]||(a[37]=s=>de.value=!1)}),n(se,{class:"md:py-8 md:px-5"},{default:c(()=>[n(we,{class:"text-center"},{default:c(()=>[n(Re,{class:"text-h3"},{default:c(()=>[y(" Add Reason ")]),_:1})]),_:1}),n(ue,null,{default:c(()=>[e("div",yr,[n(Ee,{modelValue:t(r).refund_reason,"onUpdate:modelValue":a[38]||(a[38]=s=>t(r).refund_reason=s),label:"Reason",placeholder:"Reason"},null,8,["modelValue"]),e("div",{class:"v-input__details",style:Ue(t(re)!=""?"display:block":"display:none")},[e("div",br,d(t(re)),1)],4),e("div",gr,[e("div",xr,[e("div",kr,[wr,e("div",null,[n(qe,{onClick:a[39]||(a[39]=s=>It()),class:"cursor-pointer",modelValue:t(r).is_save_reason_in_list,"onUpdate:modelValue":a[40]||(a[40]=s=>t(r).is_save_reason_in_list=s),id:"is_save_reason_in_list1",color:"success"},null,8,["modelValue"])])])])]),e("div",$r,[n(z,{class:"btn btn-primary w-fit px-8",onClick:$t},{default:c(()=>[y(" Save ")]),_:1})])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(_e,{modelValue:t(H),"onUpdate:modelValue":a[42]||(a[42]=s=>q(H)?H.value=s:null),width:"500"},{default:c(()=>[n(h,{onClick:ot}),n(se,{class:"md:py-8 md:px-5"},{default:c(()=>[n(we,{class:"text-center"},{default:c(()=>[n(Re,{class:"text-h3"},{default:c(()=>[y(" Refund Receipt ")]),_:1})]),_:1}),n(ue,null,{default:c(()=>[n(da,{transaction:t(W),posSetting:t(A),onCloseViewRefundReceiptPopup:ot},null,8,["transaction","posSetting"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});export{pu as default};
