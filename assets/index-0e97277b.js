import{d as z,cP as F,J as B,r as m,w as k,o as t,c as s,k as c,b as g,F as b,z as w,y as R,V as D,bq as O,e as i,R as l,Q as T,h as V,f as P,cZ as L,M as C,cR as M}from"./index-ab2bc521.js";import{_ as q}from"./Pen.vue_vue_type_script_setup_true_lang-e939210f.js";import{_ as G}from"./Pagination.vue_vue_type_script_setup_true_lang-6d9bdbde.js";import{_ as J}from"./Lucide.vue_vue_type_script_setup_true_lang-5dcb49e0.js";import{_ as Q}from"./LoadingIcon.vue_vue_type_script_setup_true_lang-2352b216.js";import{V as x}from"./VTooltip-1a5a6ea6.js";import"./VOverlay-39b4b039.js";import"./forwardRefs-6ea3df5c.js";import"./transition-99e7ac04.js";const Z={key:0,class:"flex p-4"},A={key:1,class:"grid"},H={key:0,class:"flex flex-col gap-4"},K={class:"flex flex-col justify-between h-full"},U={class:"font-medium text-base"},W={class:"text-slate-400 text-xs"},X={class:"dots cursor-pointer",variant:"outlined"},Y={key:0},ee={key:1},te={key:0},se={class:"h-fit my-auto flex items-center gap-4"},oe={class:"text-xs text-slate-400 flex items-center gap-1"},ae={key:0,class:"status",style:{color:"rgb(36 215 24)"}},ne={key:1,style:{color:"#ea5455"}},ce={class:"flex gap-2"},ie=["onClick"],le=["onClick"],re={key:1,class:"text-slate-400"},ke=z({__name:"index",setup(de){const o=F(),I=B("api"),f=m(!1),v=m({}),d=m([]),h=m(1),E=m(6),S="PPS-POS";document.title=S+" | Inventory-Taxes";const N=async()=>{o.setIsDeleting(!0);try{await I.inventory.tax.deleteTax(o.getIDToEdit)!==void 0&&(M.fire({icon:"success",padding:"10px",background:"#fff",html:'<span class="text-sm">Tax Deleted Successfully!</span>'}),o.setIsDeletePopupVisible(!1),d.value.length==1&&h.value--,u())}catch(a){console.log(a)}o.setIsDeleting(!1)},$=a=>{o.setIDToEdit(a),o.setIsPopupVisible(!0)},j=a=>{o.setIDToEdit(a),o.setIsDeletePopupVisible(!0)},u=async()=>{var a,p;f.value=!0;try{const r=o.getSearchValue;r!=""&&(h.value=1);const n=await I.inventory.tax.getTaxes({search:r,page:h.value,limit:E.value});d.value=await((a=n==null?void 0:n.data)==null?void 0:a.data),v.value=await((p=n==null?void 0:n.data)==null?void 0:p.meta)}catch(r){console.log(r)}f.value=!1};return u(),k(()=>o.getSearchValue,()=>{u()}),k(()=>o.getIsGetData,()=>{u()}),k(()=>o.getIsDeleteRecord,()=>{N()}),(a,p)=>{const r=q,n=O("can");return t(),s("section",null,[c(f)?(t(),s("div",Z,[g(c(Q),{icon:"tail-spin",color:"orange",class:"w-8 h-8 m-auto"})])):(t(),s("div",A,[c(d).length?(t(),s("div",H,[(t(!0),s(b,null,w(c(d),e=>(t(),s("div",{class:"px-4 py-2 flex justify-between items-center gap-4 bg-white border rounded",key:e.id},[i("div",K,[i("h3",U,l(e.name),1),i("span",W,[T(l(e.percentage)+" % | ",1),i("span",X,[T(l((e==null?void 0:e.products_count)||0)+" Items ",1),(e==null?void 0:e.products_count)>0&&e.products.length>5?(t(),V(x,{key:0,"open-delay":"500",location:"top",activator:"parent"},{default:P(()=>[(t(!0),s(b,null,w(e.products.slice(0,5),(_,y)=>(t(),s("span",null,[i("span",null,l(_.name),1),y!=Object.keys(e.products.slice(0,5)).length-1?(t(),s("span",Y,", ")):(t(),s("span",ee,", ... "))]))),256))]),_:2},1024)):(e==null?void 0:e.products_count)>0&&e.products.length<=5?(t(),V(x,{key:1,"open-delay":"500",location:"top",activator:"parent"},{default:P(()=>[(t(!0),s(b,null,w(e.products,(_,y)=>(t(),s("span",null,[i("span",null,l(_.name),1),y!=Object.keys(e.products).length-1?(t(),s("span",te,", ")):D("",!0)]))),256))]),_:2},1024)):D("",!0)])])]),i("div",se,[i("div",oe,[e.status=="active"?(t(),s("div",ae,l(("capitalize"in a?a.capitalize:c(L))(e.status)),1)):(t(),s("div",ne,l(e.status),1))]),i("div",ce,[C((t(),s("button",{type:"button",class:"bg-[#E9F5FE] rounded-sm",onClick:_=>$(e.id)},[g(r)],8,ie)),[[n,"edit-tax"]]),C((t(),s("button",{type:"button",class:"p-1 bg-danger rounded-sm",onClick:_=>j(e.id)},[g(J,{icon:"Trash2",class:"w-4 h-4 text-white"})],8,le)),[[n,"delete-tax"]])])])]))),128))])):(t(),s("div",re,"No Records Found!"))])),c(v)&&c(d).length?(t(),s("div",{key:2,class:R(["mt-8 flex m-auto",{"opacity-0":c(f)}])},[g(G,{onPageChanged:p[0]||(p[0]=e=>{h.value=e,u()}),meta:c(v),class:"w-full sm:w-auto sm:mr-auto"},null,8,["meta"])],2)):D("",!0)])}}});export{ke as default};
