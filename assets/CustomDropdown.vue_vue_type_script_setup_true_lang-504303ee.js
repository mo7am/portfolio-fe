import{_ as K}from"./AppTextField.vue_vue_type_style_index_0_lang-ff2427f7.js";import{_ as U}from"./Lucide.vue_vue_type_script_setup_true_lang-5dcb49e0.js";import{d as W,p as L,r as v,w as O,bd as q,bi as z,o as u,c as r,b as k,f as C,Q as A,R as h,V as y,O as Q,k as i,e as w,y as _,h as j,Z as E,F as P,z as Z,dc as G}from"./index-ab2bc521.js";import{b as H}from"./VTextField-bc742ce7.js";import{V as J}from"./VCard-c9d7cfad.js";import{V as X}from"./VTooltip-1a5a6ea6.js";import{V as Y}from"./VMenu-6ec9b18a.js";const ee={key:0,class:"required-icon"},te=["onClick"],le={key:0,class:"w-4 h-4 mt-1.5 flex rounded-sm border bg-white shadow-sm"},ae={key:0,class:"font-black text-base"},se={key:1},oe={key:2},ue={key:0,class:"dots",variant:"outlined"},ne={key:1},re={key:1,class:"p-2.5 px-4 text-sm rounded-sm transition hover:bg-secondary text-center"},he=W({__name:"CustomDropdown",props:{items:{type:Array,default:[]},modelValue:{type:null,default:""},label:{type:String,default:""},placeholder:{type:String,default:"Select Option"},itemTitle:{type:String,default:"name"},itemValue:{type:String,default:"id"},disabledKey:{type:String,default:""},isWithSubArray:{type:Boolean,default:!1},preSelectedItem:{type:null,default:""},hasSearch:{type:Boolean,default:!1},hasClosed:{type:Boolean,default:!1},hasCheckboxes:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:N}){const l=s,b=L(()=>l.hasSearch?l.items.filter(e=>{var a,n,t,p,V;return((n=(a=e==null?void 0:e.name)==null?void 0:a.toLowerCase())==null?void 0:n.includes(m.value.toLowerCase()))||((V=(p=(t=e==null?void 0:e.path)==null?void 0:t.join(","))==null?void 0:p.toLowerCase())==null?void 0:V.includes(m.value.toLowerCase()))}):l.items),m=v(""),I=N,d=v(!1),c=v(!1),f=v({}),o=v(l.preSelectedItem),S=v(l.preSelectedItem.id!=null),B=()=>{d.value=!1,c.value=!1,m.value=""},g=e=>{var a,n;return(a=o.value)!=null&&a.length?(n=o.value)==null?void 0:n.map(t=>t[e]):[]},D=e=>{var p;if(e.is_disabled){d.value=!0,c.value=!0;return}const a=e[l.itemValue],n=f.value[a];let t=null;if(n)if(c.value=!0,l.multiple){const V=o.value.findIndex(x=>(x==null?void 0:x.id)===(e==null?void 0:e.id));o.value.splice(V,1),t=g(l.itemValue)}else o.value={};else l.multiple?((p=o.value)!=null&&p.length?o.value.push({...e}):o.value=[{...e}],t=g(l.itemValue),d.value=!0,c.value=!0):(f.value={},o.value=e,t=a,B());f.value[a]=!n,I("update:modelValue",t)},M=()=>{c.value=!0},R=()=>{var e;if(((e=o.value)==null?void 0:e.id)!==void 0){S.value=!1,o.value={},d.value=!0,f.value={},I("update:modelValue",null);return}},$=e=>{e.currentTarget.contains(e.relatedTarget)||(c.value=!1)},T=e=>{G(e,B)},F=L(()=>l.multiple?g(l.itemTitle).join(", "):o.value[l.itemTitle]);return O(d,e=>{c.value?d.value=!0:e||(c.value=!1,m.value="")}),O(o,e=>{S.value=e.id!==void 0}),q(()=>{var e;if(l.multiple)(e=l.preSelectedItem)!=null&&e.length&&l.preSelectedItem.forEach(a=>{f.value[a[l.itemValue]]=!0});else{const a=l.preSelectedItem[l.itemValue];a&&(f.value[a]=!0)}window.addEventListener("click",T)}),z(()=>{window.removeEventListener("click",T)}),(e,a)=>{const n=K;return u(),r("div",null,[k(H,null,{default:C(()=>[A(h(s.label),1),e.$attrs.isRequired?(u(),r("span",ee,"*")):y("",!0)]),_:1}),k(Y,{modelValue:i(d),"onUpdate:modelValue":a[1]||(a[1]=t=>E(d)?d.value=t:null)},{activator:C(({props:t})=>[k(n,Q({as:"button"},t,{type:"text",class:"mt-2 !cursor-pointer",placeholder:s.placeholder,value:i(F)||"",readonly:"",isSelectedItem:i(S),hasClosedBtn:s.hasClosed,onCallRemoveOption:R}),null,16,["placeholder","value","isSelectedItem","hasClosedBtn"])]),default:C(()=>[k(J,{id:"popup-content"},{default:C(()=>[w("div",{class:_(["p-2 flex flex-col gap-1",i(b).length>4?"h-80 overflow-y-auto":""])},[s.hasSearch?(u(),j(n,{key:0,modelValue:i(m),"onUpdate:modelValue":a[0]||(a[0]=t=>E(m)?m.value=t:null),placeholder:"Search...",id:"text_search",onClick:M,onBlur:$},null,8,["modelValue"])):y("",!0),(u(!0),r(P,null,Z(i(b),(t,p)=>(u(),r("div",{key:t[s.itemValue]||p,class:_(["p-2.5 px-4 text-sm rounded-sm transition",[{"bg-primary":i(f)[t[s.itemValue]],"flex gap-2 items-start":s.hasCheckboxes},s.disabledKey&&t[s.disabledKey]?"opacity-70 cursor-not-allowed":" hover:bg-secondary hover:text-primary cursor-pointer"]]),onClick:V=>D(t)},[s.hasCheckboxes?(u(),r("div",le,[i(f)[t[s.itemValue]]?(u(),j(U,{key:0,icon:"Check",class:"w-4 h-4 m-auto text-primary"})):y("",!0)])):y("",!0),w("div",null,[s.isWithSubArray?(u(),r("div",ae,h(t[s.itemTitle]),1)):(u(),r("div",se,h(t[s.itemTitle]),1)),s.isWithSubArray?(u(),r("div",oe,[t.path.length>4?(u(),r("p",ue,[A(h(t.path.slice(0,4).join(" > ")+" ...")+" ",1),k(X,{"open-delay":"500",location:"top",activator:"parent"},{default:C(()=>[w("span",null,h(t.path.join(" > ")),1)]),_:2},1024)])):(u(),r("p",ne,h(t.path.join(" > ")),1))])):y("",!0)])],10,te))),128)),i(b).length==0?(u(),r("div",re," No items found ")):y("",!0)],2)]),_:1})]),_:1},8,["modelValue"])])}}});export{he as _};
