import{_ as B}from"./CategoryFlag.vue_vue_type_script_setup_true_lang-8aef339c.js";import{_ as F}from"./Pagination.vue_vue_type_script_setup_true_lang-6d9bdbde.js";import{d as R,cP as z,J as L,r as m,db as M,w,o as t,c as s,k as c,b as f,F as g,z as C,y as O,V as h,bq as q,e as i,h as D,R as v,Q as A,f as V,M as P,cR as T}from"./index-ab2bc521.js";import{p as G}from"./placeholder-998ebc73.js";import{_ as E}from"./Lucide.vue_vue_type_script_setup_true_lang-5dcb49e0.js";import{_ as J}from"./LoadingIcon.vue_vue_type_script_setup_true_lang-2352b216.js";import{V as N}from"./VTooltip-1a5a6ea6.js";import"./VOverlay-39b4b039.js";import"./forwardRefs-6ea3df5c.js";import"./transition-99e7ac04.js";const Q={key:0,class:"flex p-4"},H={key:1,class:"grid categories-grid gap-4 max-h-[450px] overflow-auto"},K={class:"absolute top-0 left-0"},U={class:"flex"},W=["src"],X={class:"flex flex-col"},Y={class:"dark:text-white"},Z={class:"flex justify-between items-center gap-2 w-full"},y={class:"text-slate-300 text-sm dots cursor-pointer",variant:"outlined"},ee={key:0},te={key:1},se={key:0},ne={class:"flex gap-2 items-center"},oe=["onClick"],ae=["onClick"],ie={key:1,class:"text-slate-400"},xe=R({__name:"index",setup(le){const o=z(),I=L("api"),p=m(!1),x=m({}),_=m([]),k=m(1);M("Inventory-Categories");const d=async()=>{var a,n;p.value=!0;try{const r=o.getSearchValue;r!=""&&(k.value=1);const l=await I.inventory.category.getCategories({search:r,page:k.value,limit:20,parent_id:"",main_category:""});_.value=await((a=l==null?void 0:l.data)==null?void 0:a.data),x.value=await((n=l==null?void 0:l.data)==null?void 0:n.meta)}catch(r){console.log(r)}p.value=!1},$=async()=>{var a;o.setIsDeleting(!0);try{const n=await I.inventory.category.deleteCategory(o.getIDToEdit);(a=n==null?void 0:n.data)!=null&&a.status&&(T.fire({icon:"success",padding:"10px",background:"#fff",html:'<span class="text-sm">Category Deleted Successfully!</span>'}),d())}catch(n){console.log(n)}o.setIsDeletePopupVisible(!1),o.setIsDeleting(!1)},S=a=>{o.setIDToEdit(a),o.setIsPopupVisible(!0)},j=(a,n)=>{n>0?T.fire({icon:"error",padding:"10px",background:"#fff",html:'<span class="text-sm">Categories containing items cannot be deleted!</span>'}):(o.setIDToEdit(a),o.setIsDeletePopupVisible(!0))};return d(),w(()=>o.getSearchValue,()=>{d()}),w(()=>o.getIsGetData,()=>{d()}),w(()=>o.getIsDeleteRecord,()=>{$()}),(a,n)=>{const r=B,l=q("can");return t(),s("section",null,[c(p)?(t(),s("div",Q,[f(c(J),{icon:"tail-spin",color:"orange",class:"w-8 h-8 m-auto"})])):(t(),s("div",H,[c(_).length?(t(!0),s(g,{key:0},C(c(_),e=>(t(),s("div",{class:"relative p-2 shadow bg-white dark:bg-surface rounded gap-2 w-full grid category-grid",key:e.id},[i("div",K,[e!=null&&e.color?(t(),D(r,{key:0,color:e.color},null,8,["color"])):h("",!0)]),i("div",U,[i("img",{src:e!=null&&e.image?e.image:c(G),class:"w-[40px] h-[40px] rounded m-auto"},null,8,W)]),i("div",X,[i("h3",Y,v((e==null?void 0:e.name)||"N/A"),1),i("div",Z,[i("span",y,[A(v((e==null?void 0:e.number_of_items)||0)+" Items ",1),(e==null?void 0:e.number_of_items)>0&&e.products.length>5?(t(),D(N,{key:0,"open-delay":"500",location:"top",activator:"parent"},{default:V(()=>[(t(!0),s(g,null,C(e.products.slice(0,5),(u,b)=>(t(),s("span",null,[i("span",null,v(u.name),1),b!=Object.keys(e.products.slice(0,5)).length-1?(t(),s("span",ee,", ")):(t(),s("span",te,", ...."))]))),256))]),_:2},1024)):(e==null?void 0:e.number_of_items)>0&&e.products.length<=5?(t(),D(N,{key:1,"open-delay":"500",location:"top",activator:"parent"},{default:V(()=>[(t(!0),s(g,null,C(e.products,(u,b)=>(t(),s("span",null,[i("span",null,v(u.name),1),b!=Object.keys(e.products).length-1?(t(),s("span",se,", ")):h("",!0)]))),256))]),_:2},1024)):h("",!0)]),i("div",ne,[P((t(),s("button",{class:"cursor-pointer",type:"button",onClick:u=>S(e.id)},[f(E,{icon:"Edit",class:"w-4 h-4"})],8,oe)),[[l,"edit-category"]]),P((t(),s("button",{class:"cursor-pointer",type:"button",onClick:u=>j(e.id,e==null?void 0:e.number_of_items)},[f(E,{icon:"Trash2",class:"w-4 h-4 text-danger"})],8,ae)),[[l,"delete-category"]])])])])]))),128)):(t(),s("div",ie,"No Records Found!"))])),c(x)&&c(_).length?(t(),s("div",{key:2,class:O(["mt-8 flex m-auto",{"opacity-0":c(p)}])},[f(F,{onPageChanged:n[0]||(n[0]=e=>{k.value=e,d()}),meta:c(x),class:"w-full sm:w-auto sm:mr-auto"},null,8,["meta"])],2)):h("",!0)])}}});export{xe as default};
