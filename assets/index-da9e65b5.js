import{_ as $}from"./LoadingIcon.vue_vue_type_script_setup_true_lang-2352b216.js";import{_ as b}from"./Lucide.vue_vue_type_script_setup_true_lang-5dcb49e0.js";import{_ as B}from"./Pagination.vue_vue_type_script_setup_true_lang-6d9bdbde.js";import{d as C,cX as T,J as z,r as h,bm as F,w as x,a as L,bq as N,o,c as i,k as a,b as m,y as w,F as j,z as M,e as _,R as v,M as k,h as y,f as D,V as q,cR as R,a4 as G,db as J}from"./index-ab2bc521.js";const O={key:0,class:"flex p-4"},X={class:"capitalize"},A={class:"font-medium text-base"},H={class:"text-sm"},K={class:"flex gap-4 items-center"},Q={key:1,class:"py-4"},U={key:2,class:"mt-4 flex"},W=C({__name:"Receipts",setup(I){const e=T(),f=z("api"),l=h(!1),r=h([]),g=h({}),u=F({limit:5,page:1}),d=async()=>{var s,p;l.value=!0;try{const c=e.getSearchValue;c!=""&&(u.page=1);const n=await f.settings.receipts.getReceiptsList({...u,search:c});r.value=(s=n==null?void 0:n.data)==null?void 0:s.data,g.value=(p=n==null?void 0:n.data)==null?void 0:p.meta}catch(c){console.log(c)}l.value=!1},E=s=>{e.setIDToEdit(s),e.setIsPopupVisible(!0)},V=s=>{e.setIDToEdit(s),e.setIsDeletePopupVisible(!0)},S=async()=>{e.setIsDeleting(!0);try{await f.settings.receipts.deleteReceipt(e.getIDToEdit),R.fire({icon:"success",padding:"10px",background:"#fff",html:'<span class="text-sm">Receipt Deleted Successfully!</span>'}),r.value.length===1&&u.page--,d()}catch(s){s.response.status==400&&R.fire({icon:"error",padding:"10px",background:"#fff",html:`<span class="text-sm">${s.response.data.message}!</span>`}),console.log(s)}e.setIsDeletePopupVisible(!1),e.setIsDeleting(!1)};return d(),x(()=>e.getIsGetData,d),x(()=>e.getSearchValue,d),x(()=>e.getIsDeleteRecord,S),(s,p)=>{const c=L("IconBtn"),n=N("can");return o(),i("section",null,[a(l)&&!a(r).length?(o(),i("div",O,[m(a($),{icon:"tail-spin",color:"orange",class:"w-8 h-8 m-auto"})])):(o(),i("div",{key:1,class:w(["flex flex-col gap-4 p-4 bg-white shadow-sm rounded",{"opacity-70":a(l)}])},[a(r).length?(o(!0),i(j,{key:0},M(a(r),t=>(o(),i("div",{class:"rounded px-4 py-3 border-[.5px] border-[#ECECEC] receipt-shadow bg-white flex justify-between items-center",key:t.id},[_("div",X,[_("h4",A,v(t==null?void 0:t.name),1),_("p",H,v(t==null?void 0:t.type),1)]),_("div",K,[_("div",{class:w(["font-medium capitalize",t.status==="active"?"text-green-500":"text-danger"])},v(t.status),3),k((o(),y(c,{type:"button",class:"flex h-fit py-2 px-3 bg-[#E9F5FE] rounded",onClick:P=>E(t.id)},{default:D(()=>[m(a(b),{icon:"Edit",class:"w-5 h-5 m-auto"})]),_:2},1032,["onClick"])),[[n,"edit-receipt"]]),k((o(),y(c,{type:"button",class:"flex h-fit py-2 px-3 bg-danger rounded",onClick:P=>V(t.id)},{default:D(()=>[m(a(b),{icon:"Trash2",class:"w-5 h-5 m-auto text-white"})]),_:2},1032,["onClick"])),[[n,"delete-receipt"]])])]))),128)):(o(),i("div",Q,"No Records found!")),a(g)?(o(),i("div",U,[m(B,{onPageChanged:p[0]||(p[0]=t=>{a(u).page=t,d()}),meta:a(g),class:"w-full sm:w-auto sm:mr-auto"},null,8,["meta"])])):q("",!0)],2))])}}});const Y=G(W,[["__scopeId","data-v-409f5cc6"]]),ae=C({__name:"index",setup(I){return J("Receipts Settings"),(e,f)=>{const l=Y;return o(),y(l)}}});export{ae as default};
