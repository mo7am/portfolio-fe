import{_ as F}from"./AppTextField.vue_vue_type_style_index_0_lang-ff2427f7.js";import{_ as L}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-01c6a1ae.js";import{_ as U}from"./Pagination.vue_vue_type_script_setup_true_lang-6d9bdbde.js";import{d as j,cY as I,J as M,bm as k,r as p,db as K,cS as R,w as C,o as l,c,b as m,k as e,f as x,e as _,y as O,F as S,z as X,V as P,h as A,Q as E,ci as G,cR as J,R as T}from"./index-ab2bc521.js";import{_ as Q}from"./LoadingIcon.vue_vue_type_script_setup_true_lang-2352b216.js";import{_ as Y}from"./List.vue_vue_type_script_setup_true_lang-fe3d2c63.js";import{V as q}from"./VCard-c9d7cfad.js";import{V as H}from"./VDialog-4ab52581.js";import"./VTextField-bc742ce7.js";import"./transition-99e7ac04.js";import"./forwardRefs-6ea3df5c.js";import"./VImg-7ee89f5e.js";import"./Lucide.vue_vue_type_script_setup_true_lang-5dcb49e0.js";import"./TapeTemplate.vue_vue_type_script_setup_true_lang-6a33b410.js";import"./createSimpleFunctional-c52b7322.js";import"./VAvatar-b89a8ade.js";import"./VCardText-6d82c75f.js";import"./VOverlay-39b4b039.js";import"./dialog-transition-6ea18c7a.js";const W={class:"p-4 mt-4"},Z={class:"flex gap-2"},ee={class:"mt-4"},te={key:0,class:"flex p-4"},ae=["onClick"],oe={class:"font-medium"},se={class:"capitalize"},re={key:2,class:"py-2 text-slate-400"},le={key:3,class:"mt-4 flex m-auto"},ne={class:"w-full flex"},Te=j({__name:"x-operator-tapes",setup(ie){const n=I(),y=M("api"),i=k({operators:!1,tapes:!1}),d=p(null),h=p(null),V=p({}),b=p([]),w=p(1),B=p(5),u=p([]),f=k({search:"",page:1,limit:6});K("X Tape Operator");const $=async s=>{d.value=s},v=async()=>{var s,t;i.operators=!0;try{const a=await y.tape.getMerchantUsers({search:f.search,page:f.page,limit:f.limit});u.value=await((s=a==null?void 0:a.data)==null?void 0:s.data),h.value=await((t=a==null?void 0:a.data)==null?void 0:t.meta)}catch(a){console.log(a)}i.operators=!1};v();const N=R(v,600),g=async()=>{var s,t;i.tapes=!0;try{const a=n.getSearchValue,r=await y.tape.getXTapesByOperator(d.value.id,{search:a,page:w.value,limit:B.value});b.value=await((s=r==null?void 0:r.data)==null?void 0:s.data),V.value=await((t=r==null?void 0:r.data)==null?void 0:t.meta)}catch(a){console.log(a)}i.tapes=!1},D=s=>{w.value=s,g()},z=async()=>{d.value?(n.setIsOperatorPopupVisible(!1),g()):J.fire({icon:"success",padding:"10px",background:"#fff",html:'<span style="font-size:14px">Select operator first!</span>'})};return C(()=>n.getSearchValue,()=>{d.value&&g()}),C(()=>n.getIsGetData,()=>{g()}),(s,t)=>{const a=L,r=F;return l(),c(S,null,[m(Y,{tapes:e(b),isLoading:e(i).tapes,metaObj:e(V),onCallNextPage:D},null,8,["tapes","isLoading","metaObj"]),m(H,{modelValue:e(n).isOperatorPopupVisible,"onUpdate:modelValue":t[3]||(t[3]=o=>e(n).isOperatorPopupVisible=o),width:"500"},{default:x(()=>[m(a,{onClick:t[0]||(t[0]=o=>e(n).setIsOperatorPopupVisible(!1))}),m(q,null,{default:x(()=>[_("div",W,[_("div",Z,[m(r,{type:"text",modelValue:e(f).search,"onUpdate:modelValue":t[1]||(t[1]=o=>e(f).search=o),placeholder:"Search Operators",onKeyup:e(N)},null,8,["modelValue","onKeyup"])]),_("div",ee,[e(i).operators&&!e(u).length?(l(),c("div",te,[m(e(Q),{icon:"tail-spin",class:"w-6 h-6 m-auto",color:"orange"})])):e(u).length?(l(),c("div",{key:1,class:O(["flex flex-col gap-1 max-h-[400px] overflow-auto",{"opacity-70 pointer-events-none":e(i).operators&&e(u).length}])},[(l(!0),c(S,null,X(e(u),o=>(l(),c("div",{style:{"padding-top":"5px","padding-bottom":"10px"},class:O([e(d)&&e(d).id==o.id?"border-b-2 border-on-primary":"border-b-1","relative items-center cursor-pointer"]),onClick:pe=>$(o)},[_("p",oe,T(o.name),1),_("p",se,T(o.email),1)],10,ae))),256))],2)):(l(),c("div",re,"No operator found")),e(h)?(l(),c("div",le,[m(U,{onPageChanged:t[2]||(t[2]=o=>{e(f).page=o,v()}),meta:e(h),class:"w-full sm:w-auto sm:mr-auto"},null,8,["meta"])])):P("",!0),_("div",ne,[e(u).length?(l(),A(G,{key:0,color:"primary",type:"button",class:"text-white mt-3 w-[60%] mx-auto",onClick:z},{default:x(()=>[E("Save")]),_:1})):P("",!0)])])])]),_:1})]),_:1},8,["modelValue"])],64)}}});export{Te as default};
