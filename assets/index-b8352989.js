import{d as K,I as M,J as O,bm as U,r as l,H as j,db as A,o as x,c as R,e as t,b as a,k as s,G as I,f as d,$ as L,Q as p,R as h,W as H,ci as z,h as W,V as D,cR as G}from"./index-ab2bc521.js";import{r as y,p as J,c as Q}from"./validators-6509741b.js";import{_ as Y}from"./AppTextField.vue_vue_type_style_index_0_lang-ff2427f7.js";import{_ as X}from"./LoadingIcon.vue_vue_type_script_setup_true_lang-2352b216.js";import{a as Z,b as ee}from"./auth-v1-top-shape-c5f58476.js";import{V as v}from"./VNodeRenderer-ca9ffdcc.js";import{a as se,V as oe}from"./VCard-c9d7cfad.js";import{V as ae}from"./VCardText-6d82c75f.js";import{b as te}from"./VTextField-bc742ce7.js";import{V as ne}from"./VForm-bdbb87d6.js";import{V as re}from"./VListItem-93d403d9.js";import"./createSimpleFunctional-c52b7322.js";import"./VAvatar-b89a8ade.js";import"./VImg-7ee89f5e.js";import"./transition-99e7ac04.js";import"./forwardRefs-6ea3df5c.js";const le={class:"auth-wrapper d-flex align-center justify-center pa-4"},ie={class:"position-relative my-sm-16"},de={class:"flex w-[170px] h-[45px]"},pe={class:"text-h4 mb-1"},ce={class:"text-capitalize"},ue=t("p",{class:"mb-0"},"Please enter passwords to change it.",-1),me={class:"px-4 py-0"},fe={class:"fw-medium ml-2"},we={class:"flex flex-col gap-4"},he={id:"old_password"},ye={cols:"12",class:"text-center flex justify-center text-base px-0 py-0"},$e=K({__name:"index",setup(ve){const V=M(),_=O("api"),n=U({old_password:"",new_password:"",new_password_confirmation:""}),g=l(),k=l(!1),b=l(!1),C=l(!1),c=l(!1),u=l(!1),m=l(!1),f=l(!1),w=j(),F=w.getUser;A("Change Password");const T=()=>{try{const e=_.auth.logout();w.logOut(),V.push("/login")}catch(e){console.log(e)}},B=async()=>{var e,o;if((o=await((e=g.value)==null?void 0:e.validate()))!=null&&o.valid){c.value=!0;try{const i=await _.auth.changePassword(n);w.setUser(i.data.user),V.push("/dashboard"),G.fire({icon:"success",padding:"10px",background:"#fff",html:'<span style="font-size:14px">Your password has been changed</span>'})}catch(i){console.log(i)}c.value=!1}},N=async e=>{k.value=e.getModifierState("CapsLock")},P=async()=>{if(n.old_password==""){const e=document.getElementById("oldId");e&&(e.style.marginTop="-10px")}else{const e=document.getElementById("oldId");e&&(e.style.marginTop="0px")}},S=async e=>{b.value=e.getModifierState("CapsLock")},q=async()=>{if(n.new_password==""){const e=document.getElementById("newId");e&&(e.style.marginTop="-10px")}else{const e=document.getElementById("newId");e&&(e.style.marginTop="-12px")}},$=async e=>{C.value=e.getModifierState("CapsLock")},E=async()=>{const e=document.getElementById("confirmId");e&&(e.style.marginTop="-10px")};return(e,o)=>{const i=Y;return x(),R("div",le,[t("div",ie,[a(s(v),{nodes:("h"in e?e.h:s(I))("div",{innerHTML:s(Z)}),class:"text-primary auth-v1-top-shape d-none d-sm-block"},null,8,["nodes"]),a(s(v),{nodes:("h"in e?e.h:s(I))("div",{innerHTML:s(ee)}),class:"text-primary auth-v1-bottom-shape d-none d-sm-block"},null,8,["nodes"]),a(oe,{class:"auth-card pa-4","max-width":"448"},{default:d(()=>[a(se,{class:"justify-center"},{prepend:d(()=>[t("div",de,[a(s(v),{class:"w-[170px] h-[46px]",nodes:s(L).app.logo},null,8,["nodes"])])]),_:1}),a(ae,{class:"pt-1 pb-2"},{default:d(()=>[t("h4",pe,[p(" Welcome to "),t("span",ce,h(s(L).app.title),1),p("! 👋🏻 ")]),ue]),_:1}),t("div",me,[a(te,null,{default:d(()=>[p("for "),t("span",fe,h(s(F).email),1)]),_:1}),a(ne,{ref_key:"refForm",ref:g,onSubmit:H(B,["prevent"]),class:"mt-2"},{default:d(()=>[t("div",we,[t("div",he,[a(i,{onKeydown:N,onKeyup:P,modelValue:n.old_password,"onUpdate:modelValue":o[0]||(o[0]=r=>n.old_password=r),label:"Old Password",type:u.value?"text":"password","append-inner-icon":u.value?"tabler-eye-off":"tabler-eye","onClick:appendInner":o[1]||(o[1]=r=>u.value=!u.value),placeholder:".......",rules:["requiredValidator"in e?e.requiredValidator:s(y)],hasCapsLock:k.value,currentId:"oldId"},null,8,["modelValue","type","append-inner-icon","rules","hasCapsLock"])]),t("div",null,[a(i,{onKeydown:S,onKeyup:q,modelValue:n.new_password,"onUpdate:modelValue":o[2]||(o[2]=r=>n.new_password=r),label:"New Password",type:m.value?"text":"password","append-inner-icon":m.value?"tabler-eye-off":"tabler-eye","onClick:appendInner":o[3]||(o[3]=r=>m.value=!m.value),placeholder:".......",rules:["requiredValidator"in e?e.requiredValidator:s(y),"passwordValidator"in e?e.passwordValidator:s(J)],hasCapsLock:b.value,currentId:"newId"},null,8,["modelValue","type","append-inner-icon","rules","hasCapsLock"])]),t("div",null,[a(i,{onKeydown:$,onKeyup:E,modelValue:n.new_password_confirmation,"onUpdate:modelValue":o[4]||(o[4]=r=>n.new_password_confirmation=r),label:"Confirm New Password",placeholder:".......",type:f.value?"text":"password","append-inner-icon":f.value?"tabler-eye-off":"tabler-eye","onClick:appendInner":o[5]||(o[5]=r=>f.value=!f.value),rules:["requiredValidator"in e?e.requiredValidator:s(y),("confirmedValidator"in e?e.confirmedValidator:s(Q))(n.new_password_confirmation,n.new_password)],hasCapsLock:C.value,currentId:"confirmId"},null,8,["modelValue","type","append-inner-icon","rules","hasCapsLock"])]),a(z,{class:"min-w-[302px]",block:"",type:"submit"},{default:d(()=>[p(h(c.value?"":"Set New Password")+" ",1),c.value?(x(),W(s(X),{key:0,icon:"tail-spin",color:"white",class:"block w-4 h-4"})):D("",!0)]),_:1}),t("div",ye,[a(re,{class:"text-primary w-fit flex justify-center items-center gap-1 text-sm",onClick:T},{default:d(()=>[p(" Logout ")]),_:1})])])]),_:1},512)])]),_:1})])])}}});export{$e as default};
