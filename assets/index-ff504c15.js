import{_ as R}from"./AppSelect.vue_vue_type_script_setup_true_lang-3371fd7f.js";import{_ as A}from"./AppTextField.vue_vue_type_style_index_0_lang-ff2427f7.js";import{_ as K}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-01c6a1ae.js";import{d as E,cY as G,J,r,db as Q,cS as Y,w as O,o as p,c as m,b as l,k as e,f as _,e as i,ci as S,Q as T,h as q,y as P,F as $,z as W,V as ee,Z as ae,R as B}from"./index-ab2bc521.js";import{_ as te}from"./List.vue_vue_type_script_setup_true_lang-fe3d2c63.js";import{_ as oe}from"./DatePicker.vue_vue_type_style_index_0_lang-9c1149fd.js";import{_ as U}from"./LoadingIcon.vue_vue_type_script_setup_true_lang-2352b216.js";import{_ as se}from"./Pagination.vue_vue_type_script_setup_true_lang-6d9bdbde.js";import{V as D}from"./VCard-c9d7cfad.js";import{V as N}from"./VDialog-4ab52581.js";import"./VTextField-bc742ce7.js";import"./transition-99e7ac04.js";import"./forwardRefs-6ea3df5c.js";import"./VImg-7ee89f5e.js";import"./VTooltip-1a5a6ea6.js";import"./VOverlay-39b4b039.js";import"./VSelect-9cc3df93.js";import"./VList-6df8630b.js";import"./VListItem-93d403d9.js";import"./createSimpleFunctional-c52b7322.js";import"./VAvatar-b89a8ade.js";import"./ssrBoot-93503f06.js";import"./VDivider-b868c04b.js";import"./dialog-transition-6ea18c7a.js";import"./VMenu-6ec9b18a.js";import"./VCheckboxBtn-023236ba.js";import"./VSelectionControl-e6ec7db0.js";import"./TapeTemplate.vue_vue_type_script_setup_true_lang-6a33b410.js";import"./Lucide.vue_vue_type_script_setup_true_lang-5dcb49e0.js";import"./VCardText-6d82c75f.js";const le={class:"py-8 px-4"},ne={id:"number_of_transactions"},ie={id:"user_id",class:"relative"},re={id:"type",class:"relative"},pe={id:"created_at"},me={class:"mt-4 flex justify-center"},ue={key:1},de={class:"p-4 mt-4"},ce={class:"flex gap-2"},_e={class:"mt-4"},fe={key:0,class:"flex p-4"},ve=["onClick"],ye={class:"font-medium"},ge={class:"capitalize"},Ve={key:2,class:"py-2 text-slate-400"},be={key:3,class:"mt-4 flex m-auto"},We=E({__name:"index",setup(he){const u=G(),k=J("api"),y=r(!1),g=r(!1),d=r(!1),C=r({}),w=r([]),f=r([]),v=r(null),F=[{id:"x tape",name:"X Tape"},{id:"z tape",name:"Z Tape"},{id:"x tape by operator",name:"X Tape By Operator"}],t=r({type:"",user_name:"",user_id:"",created_at:"",number_of_transactions:"",limit:5,page:1}),b=r(null),V=r({search:"",limit:5,page:1});Q("X/Z Tapes");const c=async()=>{var n,a;y.value=!0;try{(t.value.type!=""||t.value.user_id!=""||t.value.created_at!=""||t.value.number_of_transactions!="")&&(t.value.page=1);const s=await k.tape.getXZTapesHistory(t.value);w.value=await((n=s==null?void 0:s.data)==null?void 0:n.data),C.value=await((a=s==null?void 0:s.data)==null?void 0:a.meta)}catch(s){console.log(s)}y.value=!1},I=async()=>{c(),u.setIsSearchPopupVisible(!1)},L=n=>{t.value.page=n,c()},h=async()=>{var n,a;g.value=!0;try{const s=await k.tape.getMerchantUsers({search:V.value.search,page:V.value.page,limit:V.value.limit});f.value=await((n=s==null?void 0:s.data)==null?void 0:n.data),b.value=await((a=s==null?void 0:s.data)==null?void 0:a.meta)}catch(s){console.log(s)}g.value=!1};c();const j=async()=>{t.value.user_id="",t.value.type="",t.value.user_name="",t.value.created_at="",t.value.number_of_transactions="",u.setIsSearchPopupVisible(!1),c()},z=async()=>{d.value=!0,h()},X=async()=>{v.value=null,t.value.user_name="",t.value.user_id=""},Z=async n=>{v.value=n,d.value=!1,t.value.user_name=n.name,t.value.user_id=n.id},H=Y(h,600);return O(()=>u.getSearchValue,()=>{c()}),O(()=>u.getIsGetData,()=>{c()}),(n,a)=>{const s=K,x=A,M=R;return p(),m($,null,[l(te,{tapes:e(w),isLoading:e(y),metaObj:e(C),onCallNextPage:L},null,8,["tapes","isLoading","metaObj"]),l(N,{modelValue:e(u).isSearchPopupVisible,"onUpdate:modelValue":a[6]||(a[6]=o=>e(u).isSearchPopupVisible=o),width:"500"},{default:_(()=>[l(s,{onClick:a[0]||(a[0]=o=>e(u).setIsSearchPopupVisible(!1))}),l(D,null,{default:_(()=>[i("div",le,[i("div",ne,[l(x,{type:"number",modelValue:e(t).number_of_transactions,"onUpdate:modelValue":a[1]||(a[1]=o=>e(t).number_of_transactions=o),label:"Number Of Transactions",placeholder:"Type Here..."},null,8,["modelValue"])]),i("div",ie,[l(x,{onClick:a[2]||(a[2]=o=>z()),modelValue:e(t).user_name,"onUpdate:modelValue":a[3]||(a[3]=o=>e(t).user_name=o),label:"Created By",placeholder:"Type Here...",type:"text",readOnly:!0,isSelectedItem:!!e(v),hasClosedBtn:!0,onCallRemoveOption:X},null,8,["modelValue","isSelectedItem"])]),i("div",re,[l(M,{modelValue:e(t).type,"onUpdate:modelValue":a[4]||(a[4]=o=>e(t).type=o),items:F,label:"Type","item-title":"name","item-value":"id","form-id":"type",placeholder:"Select Type",clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),i("div",pe,[l(e(oe),{modelValue:e(t).created_at,"onUpdate:modelValue":a[5]||(a[5]=o=>e(t).created_at=o),label:"Date",placeholder:"Select Date",config:{inline:!0}},null,8,["modelValue"])]),i("div",me,[l(S,{color:"warning",onClick:j},{default:_(()=>[T("Drop Filter")]),_:1}),T("     "),l(S,{class:"flex",onClick:I},{default:_(()=>[e(y)?(p(),q(e(U),{key:0,icon:"tail-spin",color:"white",class:"w-4 h-4 m-auto"})):(p(),m("span",ue,"Ok"))]),_:1})])])]),_:1})]),_:1},8,["modelValue"]),l(N,{modelValue:e(d),"onUpdate:modelValue":a[10]||(a[10]=o=>ae(d)?d.value=o:null),width:"500"},{default:_(()=>[l(s,{onClick:a[7]||(a[7]=o=>d.value=!1)}),l(D,null,{default:_(()=>[i("div",de,[i("div",ce,[l(x,{type:"text",modelValue:e(t).search,"onUpdate:modelValue":a[8]||(a[8]=o=>e(t).search=o),placeholder:"Search Operators",onKeyup:e(H)},null,8,["modelValue","onKeyup"])]),i("div",_e,[e(g)&&!e(f).length?(p(),m("div",fe,[l(e(U),{icon:"tail-spin",class:"w-6 h-6 m-auto",color:"orange"})])):e(f).length?(p(),m("div",{key:1,class:P(["flex flex-col gap-1 max-h-[400px] overflow-auto",{"opacity-70 pointer-events-none":e(g)&&e(f).length}])},[(p(!0),m($,null,W(e(f),o=>(p(),m("div",{style:{"padding-top":"5px","padding-bottom":"10px"},class:P([e(v)&&e(v).id==o.id?"border-b-2 border-on-primary":"border-b-1","relative items-center cursor-pointer"]),onClick:xe=>Z(o)},[i("p",ye,B(o.name),1),i("p",ge,B(o.email),1)],10,ve))),256))],2)):(p(),m("div",Ve,"No operator found")),e(b)?(p(),m("div",be,[l(se,{onPageChanged:a[9]||(a[9]=o=>{e(V).page=o,h()}),meta:e(b),class:"w-full sm:w-auto sm:mr-auto"},null,8,["meta"])])):ee("",!0)])])]),_:1})]),_:1},8,["modelValue"])],64)}}});export{We as default};
