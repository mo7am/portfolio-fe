import{_ as we}from"./BoxIcon.vue_vue_type_script_setup_true_lang-d6cac4eb.js";import{d as le,J as fe,bm as Z,r as y,cS as pe,w as G,o as i,c as h,b as n,f as r,k as e,h as g,e as l,cQ as P,b6 as _e,R as p,ci as z,Q as L,Z as q,F as W,cR as ve,a as oe,z as ue,V as T,y as ce,L as he,db as $e,M as Y,aC as Ce,S as xe,bq as ke}from"./index-ab2bc521.js";import{_ as ge}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-01c6a1ae.js";import{_ as Ve,a as Se}from"./AppTextarea.vue_vue_type_script_setup_true_lang-3993f788.js";import{_ as Ee}from"./AppSelect.vue_vue_type_script_setup_true_lang-3371fd7f.js";import{_ as ye}from"./AppTextField.vue_vue_type_style_index_0_lang-ff2427f7.js";import{_ as ee}from"./LoadingIcon.vue_vue_type_script_setup_true_lang-2352b216.js";import{_ as Le}from"./DatePicker.vue_vue_type_style_index_0_lang-9c1149fd.js";import{P as se}from"./vue3-perfect-scrollbar.esm-8af4f7c1.js";import{_ as Pe}from"./Lucide.vue_vue_type_script_setup_true_lang-5dcb49e0.js";import{b as Te}from"./VTextField-bc742ce7.js";import{V as Ne}from"./VCardText-6d82c75f.js";import{a as B,V as Q}from"./VRow-ba1da485.js";import{V as R,a as Ae,b as te}from"./VCard-c9d7cfad.js";import{V as be}from"./VDialog-4ab52581.js";import{_ as ze}from"./DeletePopup.vue_vue_type_script_setup_true_lang-8649cda4.js";import{V as De}from"./VDivider-b868c04b.js";const Ue={key:0,class:"flex p-4"},Fe={class:"grid md:grid-cols-2 gap-4"},Be={id:"first_name"},je={id:"last_name"},Me={id:"email"},Oe={id:"phone"},Re={class:"text-sm text-danger mt-1"},Ie={id:"birthday"},He=l("p",{style:{"margin-top":"17px","font-weight":"bold"}},"Address",-1),Ke={class:"grid md:grid-cols-2 gap-4"},qe={id:"address_line_1"},We={id:"address_line_2"},Qe={id:"zip_code"},Ze={id:"state_id"},Ge={id:"city"},Je={class:"col-span-full",id:"notes"},Xe=l("span",null,"Save",-1),Ye={key:1},et={class:"py-8 px-4"},tt={class:"mb-2 flex"},st=l("div",{class:"text-center text-xl text-danger"}," The user that belong to this phone number is exists ? ",-1),lt={class:"mt-4 flex justify-center"},ot={key:1},me=le({__name:"CustomerForm",props:{preview:{type:Boolean},idToEdit:{}},emits:["update:isDialogVisible","getList","updatePreview"],setup(_,{emit:N}){const A=N,V=fe("api"),c=Z({initial:!1,submitting:!1,fetching:!1}),w=_,E=y(!1),u=y(""),$=y(""),m=y(""),x=y(!1),k=y(!1),s=Z({first_name:"",last_name:"",email:"",phone:"",birthday:"",address_line_1:"",address_line_2:"",city:"",state_id:"",zip_code:"",notes:""}),U=y({}),o=y(0),j=y([]),D=async()=>{c.initial=!0;try{j.value=[];const a=await V.customer.createCustomer();U.value=await(a==null?void 0:a.data)}catch(a){console.log(a)}c.initial=!1},M=async()=>{var a;c.initial=!0;try{let t=o.value!=0?o.value:w.idToEdit;const f=await V.customer.editCustomer(t);U.value=await(f==null?void 0:f.data);const b=(a=U.value)==null?void 0:a.customer;b&&(Object.keys(s).forEach(C=>{s[C]=b[C]}),s.state_id=b.address&&b.address.state?b.address.state.id:null,s.city=b.address?b.address.city:null,s.zip_code=b.address?b.address.zip_code:null,s.address_line_1=b.address?b.address.address_line_1:null,s.address_line_2=b.address?b.address.address_line_2:null)}catch(t){console.log(t)}c.initial=!1},J=async()=>{var f,b;c.submitting=!0;var a=null;let t=o.value!=0?o.value:w.idToEdit;try{if(t!=0){const C=await V.customer.updateCustomer(t,s);a=(f=C==null?void 0:C.data)==null?void 0:f.data}else{const C=await V.customer.storeCustomer(s);a=(b=C==null?void 0:C.data)==null?void 0:b.data}ve.fire({icon:"success",padding:"10px",background:"#fff",html:`<span style="font-size:14px">Customer ${t!=0?"Updated":"Added"} Successfully!</span>`}),A("updatePreview",a),A("getList")}catch(C){console.log(C)}c.submitting=!1};w.preview&&w.idToEdit!=0?M():D();const I=a=>{P("phone"),$.value="+"+a.countryCallingCode,m.value=a.formatted,E.value=!(!a.valid||a.valid==null),s.phone!=""&&E.value&&O(a.formatted)},O=async(a=s.phone)=>{try{let t=o.value!=0?o.value:w.idToEdit;const f=await V.customer.checkUniqueCustomerPhone(t,{phone:a})}catch(t){console.log(t),t.response.status==422&&(x.value=!0,k.value=!0)}},X=()=>{k.value&&v()};document.body.addEventListener("click",X,!0);const S=async()=>{c.fetching=!0;try{if(s.phone!=""){const t=(await V.customer.getExistingCustomerByPhone(s.phone)).data.data;t&&(o.value=t.id,s.first_name=s.first_name==""?t.first_name:s.first_name,s.last_name=s.last_name==""?t.last_name:s.last_name,s.email=s.email==""?t.email:s.email,s.phone=s.phone==""?t.phone:s.phone,s.birthday=s.birthday==""?t.birthday:s.birthday,s.notes=s.notes==""?t.notes:s.notes,s.state_id=s.state_id==""?t.address&&t.address.state?t.address.state.id:null:s.state_id,s.city=s.city==""?t.address?t.address.city:null:s.city,s.zip_code=s.zip_code==""?t.address?t.address.zip_code:null:s.zip_code,s.address_line_1=s.address_line_1==""?t.address?t.address.address_line_1:null:s.address_line_1,s.address_line_2=s.address_line_2==""?t.address?t.address.address_line_2:null:s.address_line_2)}c.fetching=!1}catch(a){console.log(a)}},v=()=>{x.value=!1,k.value=!1},F=pe(a=>{P("phone"),E.value||a.length!=0?(u.value="",E.value&&s.phone.toLowerCase().indexOf($.value)===-1&&(s.phone=m.value),O()):E.value||(u.value="The phone field format is invalid.")},800);return G(()=>w.idToEdit,a=>{a!=0&&(o.value=0,M())}),G(E,a=>{a?u.value="":u.value="The phone field format is invalid."}),(a,t)=>{const f=ye,b=oe("vue-tel-input"),C=Ee,H=Ve,K=ge;return i(),h(W,null,[n(R,{height:"515",class:"d-flex flex-column"},{default:r(()=>[n(e(se),{options:{wheelPropagation:!1},style:{"margin-right":"-20px"}},{default:r(()=>[e(c).initial?(i(),h("div",Ue,[n(e(ee),{icon:"tail-spin",class:"w-4 h-4 m-auto",color:"black"})])):(i(),g(Ne,{key:1},{default:r(()=>[l("div",Fe,[l("div",Be,[n(f,{onKeyup:t[0]||(t[0]=d=>("removeError"in a?a.removeError:e(P))("first_name")),modelValue:e(s).first_name,"onUpdate:modelValue":t[1]||(t[1]=d=>e(s).first_name=d),label:"First Name",placeholder:"Type Here..."},null,8,["modelValue"])]),l("div",je,[n(f,{onKeyup:t[2]||(t[2]=d=>("removeError"in a?a.removeError:e(P))("last_name")),modelValue:e(s).last_name,"onUpdate:modelValue":t[3]||(t[3]=d=>e(s).last_name=d),label:"Last Name",placeholder:"Type Here..."},null,8,["modelValue"])]),l("div",Me,[n(f,{onKeyup:t[4]||(t[4]=d=>("removeError"in a?a.removeError:e(P))("email")),modelValue:e(s).email,"onUpdate:modelValue":t[5]||(t[5]=d=>e(s).email=d),label:"Email",placeholder:"Type Here..."},null,8,["modelValue"])]),l("div",Oe,[n(Te,{for:"phone",class:"mb-2",text:"Phone"}),n(b,{disabled:e(x),onValidate:t[6]||(t[6]=d=>I(d)),onCountryChanged:t[7]||(t[7]=d=>I(d)),onKeyup:t[8]||(t[8]=d=>e(F)(e(s).phone)),modelValue:e(s).phone,"onUpdate:modelValue":t[9]||(t[9]=d=>e(s).phone=d),defaultCountry:"US",mode:"international",autoDefaultCountry:!0,invalidMsg:"dasdsadsa",validCharactersOnly:!0,autoFormat:!0,inputOptions:{maxlength:25,required:!0,autocomplete:"on",placeholder:"Enter Phone Number"},dropdownOptions:{showSearchBox:!0,searchBoxPlaceholder:"Search Country",showFlags:!0,showDialCodeInList:!0,showDialCodeInSelection:!1}},null,8,["disabled","modelValue"]),l("div",{class:"v-input__details",style:_e(e(u)!=""?"display:block":"display:none")},[l("div",Re,p(e(u)),1)],4)]),l("div",Ie,[n(e(Le),{"onUpdate:modelValue":[t[10]||(t[10]=d=>("removeError"in a?a.removeError:e(P))("birthday")),t[11]||(t[11]=d=>e(s).birthday=d)],modelValue:e(s).birthday,label:"Birthday",placeholder:"Select Date",config:{inline:!0}},null,8,["modelValue"])])]),He,l("div",Ke,[l("div",qe,[n(f,{onKeyup:t[12]||(t[12]=d=>("removeError"in a?a.removeError:e(P))("address_line_1")),modelValue:e(s).address_line_1,"onUpdate:modelValue":t[13]||(t[13]=d=>e(s).address_line_1=d),label:"Address Line 1",placeholder:"Type Here..."},null,8,["modelValue"])]),l("div",We,[n(f,{onKeyup:t[14]||(t[14]=d=>("removeError"in a?a.removeError:e(P))("address_line_2")),modelValue:e(s).address_line_2,"onUpdate:modelValue":t[15]||(t[15]=d=>e(s).address_line_2=d),label:"Address Line 2",placeholder:"Type Here..."},null,8,["modelValue"])]),l("div",Qe,[n(f,{onKeyup:t[16]||(t[16]=d=>("removeError"in a?a.removeError:e(P))("zip_code")),modelValue:e(s).zip_code,"onUpdate:modelValue":t[17]||(t[17]=d=>e(s).zip_code=d),label:"Zip Code",placeholder:"Type Here..."},null,8,["modelValue"])]),l("div",Ze,[n(C,{"onUpdate:modelValue":[t[18]||(t[18]=d=>("removeError"in a?a.removeError:e(P))("state_id")),t[19]||(t[19]=d=>e(s).state_id=d)],modelValue:e(s).state_id,items:e(U).states,label:"State","item-title":"name","item-value":"id","form-id":"state_id",placeholder:"Select State"},null,8,["modelValue","items"])]),l("div",Ge,[n(f,{onKeyup:t[20]||(t[20]=d=>("removeError"in a?a.removeError:e(P))("city")),modelValue:e(s).city,"onUpdate:modelValue":t[21]||(t[21]=d=>e(s).city=d),label:"City",placeholder:"Type Here..."},null,8,["modelValue"])]),l("div",Je,[n(H,{onKeyup:t[22]||(t[22]=d=>("removeError"in a?a.removeError:e(P))("notes")),modelValue:e(s).notes,"onUpdate:modelValue":t[23]||(t[23]=d=>e(s).notes=d),label:"Notes",placeholder:"Notes"},null,8,["modelValue"])])])]),_:1}))]),_:1}),l("div",null,[n(B,{cols:"12",class:"d-flex gap-4"},{default:r(()=>[e(u)!=""?(i(),g(z,{key:0,class:"text-white"},{default:r(()=>[Xe]),_:1})):(i(),g(z,{key:1,type:"submit",class:"text-white",onClick:J},{default:r(()=>[e(c).submitting?(i(),g(e(ee),{key:0,icon:"tail-spin",class:"w-4 h-4 m-auto",color:"white"})):(i(),h("span",Ye,"Save"))]),_:1}))]),_:1})])]),_:1}),n(be,{modelValue:e(k),"onUpdate:modelValue":t[26]||(t[26]=d=>q(k)?k.value=d:null),width:"500"},{default:r(()=>[n(K,{onClick:t[24]||(t[24]=d=>v())}),n(R,null,{default:r(()=>[l("div",et,[l("div",tt,[n(Pe,{icon:"AlertTriangle",class:"m-auto w-16 h-16 text-danger"})]),st,l("div",lt,[n(z,{color:"warning",onClick:t[25]||(t[25]=d=>v())},{default:r(()=>[L("Cancel!")]),_:1}),L("     "),n(z,{class:"flex text-white",color:"primary",onClick:S},{default:r(()=>[e(c).fetching?(i(),g(e(ee),{key:0,icon:"tail-spin",color:"white",class:"w-4 h-4 m-auto"})):(i(),h("span",ot,"Update Existing?"))]),_:1})])])]),_:1})]),_:1},8,["modelValue"])],64)}}});const at={class:"ma-0 mt-n1"},it={cols:"12",class:"border-t cursor-pointer pa-4 shortcut-icon"},nt={class:"search-style"},dt={class:"flex justify-between"},rt={key:0,class:"p-4 text-center"},ut={style:{"margin-top":"-14px"},class:"flex flex-col gap-4 p-4 bg-white dark:bg-surface shadow rounded"},ct={class:"flex flex-col justify-between h-full"},mt={key:0,style:{color:"black","font-size":"17px","font-weight":"bold"},class:"mb-0"},ft={key:1,style:{color:"black","font-size":"17px","font-weight":"bold"},class:"mb-0"},pt={key:0},_t=l("br",null,null,-1),vt={key:0},ht=l("br",null,null,-1),gt={key:1},yt={class:"flex gap-2"},bt={width:"46",height:"36",viewBox:"0 0 46 36",fill:"none",xmlns:"http://www.w3.org/2000/svg"},wt=l("rect",{width:"46",height:"35.1429",rx:"4",fill:"#E9F5FE"},null,-1),$t=["stroke"],Ct={key:2,class:"flex flex-col gap-4 p-4 bg-white dark:bg-surface shadow rounded"},xt=l("div",{class:"text-slate-400 text-center"},"No Records Found!",-1),kt=[xt],Vt={class:"h-fit"},St={class:"search-style"},Et={key:0,class:"p-4 text-center"},Lt={class:"flex flex-col gap-4 p-4 bg-white dark:bg-surface shadow rounded"},Pt={class:"flex flex-col justify-between h-full"},Tt={key:0,style:{color:"black","font-size":"17px","font-weight":"bold"},class:"mb-0"},Nt={key:1,style:{color:"black","font-size":"17px","font-weight":"bold"},class:"mb-0"},At={key:2,class:"text-muted d-block"},zt={class:"mb-0"},Dt={key:2,class:"flex flex-col gap-4 p-4 bg-white dark:bg-surface shadow rounded"},Ut=l("div",{class:"text-slate-400 text-center"},"No Records Found!",-1),Ft=[Ut],Bt=le({__name:"lists",props:{customers:{type:Array,default:[]},metaObj:{type:Object,default:{}},isLoading:{type:Boolean,default:!1},isShowMore:{type:Boolean,default:!1},currentCustomer:{type:Object,default:null}},setup(_){const N=_,A=y(!1),V=y(window.innerWidth),c=y({}),w=y(""),E=async $=>{c.value=$},u=async()=>{w.value=""};return window.addEventListener("resize",()=>{V.value=window.innerWidth}),G(()=>N.currentCustomer,$=>{$?c.value=$:c.value=null}),($,m)=>{const x=ye,k=oe("RouterLink"),s=Se,U=ge;return e(V)>785?(i(),g(R,{key:0,"max-height":"635",class:"h-fit lg:min-h-[635px] lg:h-full d-flex flex-column"},{default:r(()=>[l("div",at,[l("div",it,[l("div",nt,[l("div",dt,[n(x,{modelValue:e(w),"onUpdate:modelValue":m[0]||(m[0]=o=>q(w)?w.value=o:null),placeholder:"Search...",id:"text_search",onInput:m[1]||(m[1]=o=>$.$emit("callSearchCustomers",e(w))),isSearchBox:!0},null,8,["modelValue"]),L("    "),n(z,{onClick:m[2]||(m[2]=o=>{$.$emit("callResetFilter",e(w)),u()}),type:"button",class:"w-20 p-4 rounded-lg shadow flex gap-4 text-center"},{default:r(()=>[L("Reset")]),_:1})])])])]),N.isLoading&&N.isShowMore==!1?(i(),h("span",rt,"Loading... ")):_.customers.length?(i(),g(e(se),{key:1,options:{wheelPropagation:!1}},{default:r(()=>[l("div",ut,[(i(!0),h(W,null,ue(_.customers,o=>(i(),g(k,{style:{height:"86px"},class:ce(["p-2 rounded-lg shadow flex items-center justify-between gap-4",{"bg-secondary dark:!bg-slate-600 text-primary":e(c)&&e(c).id===o.id,"bg-[#f8f7fa] dark:bg-darkmode-bg":e(c)&&e(c).id!==o.id}]),to:"",onClick:j=>{E(o),$.$emit("callSelectCurrentCustomer",o)}},{default:r(()=>[l("div",ct,[o.first_name||o.last_name?(i(),h("h6",mt,p(o.first_name)+" "+p(o.last_name),1)):(i(),h("h6",ft,[o.email?(i(),h("span",pt,[L(p(o.email),1),_t])):T("",!0),L(" "+p(o.phone),1)])),o.first_name||o.last_name?(i(),h("small",{key:2,style:_e(o.email?"margin-bottom: 7px":"margin-bottom: 25px"),class:"text-muted d-block"},[o.email?(i(),h("span",vt,[L(p(o.email),1),ht])):T("",!0),o.phone?(i(),h("span",gt,p(o.phone),1)):T("",!0)],4)):T("",!0)]),l("div",yt,[(i(),h("svg",bt,[wt,l("path",{d:"M20 12L26 17.5714L20 23.1429",stroke:e(c)&&e(c).id===o.id?e(he):"#2196F3","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,8,$t)]))])]),_:2},1032,["class","onClick"]))),256)),_.metaObj&&_.metaObj.last_page>1?(i(),g(z,{key:0,disabled:_.metaObj.current_page==_.metaObj.last_page,onClick:m[3]||(m[3]=o=>$.$emit("callNextPage")),type:"button",class:"p-4 rounded-lg shadow flex gap-4 text-center"},{default:r(()=>[L(p(N.isShowMore?"Loading...":"Show More"),1)]),_:1},8,["disabled"])):T("",!0)])]),_:1})):(i(),h("div",Ct,kt))]),_:1})):(i(),h(W,{key:1},[l("div",Vt,[l("button",{class:"cursor-pointer",onClick:m[4]||(m[4]=o=>A.value=!0)},[n(s)])]),n(be,{modelValue:e(A),"onUpdate:modelValue":m[9]||(m[9]=o=>q(A)?A.value=o:null),width:"500"},{default:r(()=>[n(U,{onClick:m[5]||(m[5]=o=>A.value=!e(A))}),n(R,{"max-height":"635",class:"d-flex flex-column"},{default:r(()=>[n(Q,{class:"ma-0 mt-n1"},{default:r(()=>[n(B,{cols:"12",class:"border-t cursor-pointer pa-4 shortcut-icon"},{default:r(()=>[l("div",St,[n(x,{modelValue:e(w),"onUpdate:modelValue":m[6]||(m[6]=o=>q(w)?w.value=o:null),placeholder:"Search...",id:"text_search",onInput:m[7]||(m[7]=o=>$.$emit("callSearchCustomers",e(w))),isSearchBox:!0},null,8,["modelValue"])])]),_:1})]),_:1}),N.isLoading&&N.isShowMore==!1?(i(),h("span",Et,"Loading... ")):_.customers.length?(i(),g(e(se),{key:1,options:{wheelPropagation:!1}},{default:r(()=>[l("div",Lt,[(i(!0),h(W,null,ue(_.customers,o=>(i(),g(k,{class:ce(["p-4 rounded-lg shadow flex items-center justify-between gap-4",{"bg-secondary dark:!bg-slate-600 text-primary":e(c)&&e(c).id===o.id,"bg-[#f8f7fa] dark:bg-darkmode-bg":e(c)&&e(c).id!==o.id}]),to:"",onClick:j=>{E(o),$.$emit("callSelectCurrentCustomer",o)}},{default:r(()=>[l("div",Pt,[o.first_name||o.last_name?(i(),h("h6",Tt,p(o.first_name)+" "+p(o.last_name),1)):(i(),h("h6",Nt,p(o.phone),1)),o.first_name||o.last_name?(i(),h("small",At,[l("span",zt,p(o.phone),1)])):T("",!0)])]),_:2},1032,["class","onClick"]))),256)),_.metaObj&&_.metaObj.last_page>1?(i(),g(z,{key:0,disabled:_.metaObj.current_page==_.metaObj.last_page,onClick:m[8]||(m[8]=o=>$.$emit("callNextPage")),type:"button",class:"p-4 rounded-lg shadow flex gap-4 text-center"},{default:r(()=>[L(p(N.isShowMore?"Loading...":"Show More"),1)]),_:1},8,["disabled"])):T("",!0)])]),_:1})):(i(),h("div",Dt,Ft))]),_:1})]),_:1},8,["modelValue"])],64))}}}),jt={key:0,class:"flex items-center gap-2"},Mt={class:"bg-secondary dark:!bg-surface p-2 shadow rounded flex"},Ot=l("p",{class:"text-xl"},"Customers",-1),Rt={class:"grid ineventory-grid gap-4 mt-4"},It={class:"flex flex-col gap-4"},Ht={class:"mt-4 flex justify-center"},Kt=l("span",{class:"hidden md:block"}," Create ",-1),qt=l("br",null,null,-1),Wt=l("h6",{style:{"text-decoration":"underline"},class:"text-base font-weight-medium mt-2 mb-0"}," Basic Information ",-1),Qt=l("br",null,null,-1),Zt={class:"grid md:grid-cols-2 gap-4"},Gt={id:"first_name"},Jt=l("label",{for:""},"First Name: ",-1),Xt={id:"last_name"},Yt=l("label",{for:""},"Last Name: ",-1),es={id:"email"},ts=l("label",{for:""},"Email: ",-1),ss={id:"phone"},ls=l("label",{for:""},"Phone: ",-1),os={id:"birthday"},as=l("label",{for:""},"Birthday: ",-1),is=l("br",null,null,-1),ns=l("h6",{style:{"text-decoration":"underline"},class:"text-base font-weight-medium mt-2 mb-0"}," Address Information ",-1),ds=l("br",null,null,-1),rs={class:"grid md:grid-cols-2 gap-4"},us={id:"address_line_1"},cs=l("label",{for:""},"Address Line 1: ",-1),ms={id:"address_line_2"},fs=l("label",{for:""},"Address Line 2: ",-1),ps={id:"city"},_s=l("label",{for:""},"City: ",-1),vs={id:"zip_code"},hs=l("label",{for:""},"Zipe Code: ",-1),gs={id:"state"},ys=l("label",{for:""},"State: ",-1),bs=l("span",null,"Save",-1),Bs=le({__name:"index",props:{isCustomerSelection:{type:Boolean,default:!1}},setup(_){const N=_,A=y(window.innerWidth);window.addEventListener("resize",()=>{A.value=window.innerWidth}),$e("Cutomers");const V=y(!1),c=y(null);G([V,c],()=>{V.value&&c.value&&c.value.fallbackHandle(),!V.value&&c.value&&c.value.resolveHandle()},{immediate:!0});const w=fe("api");y(0);const E=y([]),u=y(),$=y(null),m=y(!1),x=y({search:"",limit:5,page:1}),k=Z({list:!1,deleting:!1}),s=Z({create:!1,edit:!1,delete:!1}),U=async()=>{$.value.current_page<$.value.last_page&&(x.value.page++,m.value=!0,D(!0))},o=pe(S=>{x.value.search=S,x.value.page=1,D(!1),m.value=!1},600),j=async S=>{S!=""&&(x.value.search="",x.value.page=1,D(!1),m.value=!1)},D=async S=>{var v,F,a;try{m.value||(k.list=!0);const t=await w.customer.getCustomers(x.value);(x.value.search!=""||x.value.search=="")&&S?(v=t.data)==null||v.data.forEach(f=>{E.value.push(f)}):E.value=(F=t==null?void 0:t.data)==null?void 0:F.data,u.value||M(E.value[0]),$.value=(a=t==null?void 0:t.data)==null?void 0:a.meta,m.value?m.value=!1:k.list=!1}catch(t){console.log(t)}},M=async S=>{u.value=S,s.create=!1,N.isCustomerSelection?s.edit=!1:s.edit=!0,s.delete=!1},J=async()=>{u.value=null,s.edit=!1,s.delete=!1,s.create=!0},I=()=>{s.delete=!0},O=async S=>{u.value=S,s.create=!1,s.edit=!0,s.delete=!1},X=async()=>{k.deleting=!0;try{await w.customer.deleteCustomer(u.value.id),ve.fire({icon:"success",padding:"10px",background:"#fff",html:'<span style="font-size:14px">Customer Deleted Successfully!</span>'}),k.deleting=!1,s.create=!1,s.delete=!1,s.edit=!1,u.value=null,x.value.page=1,D(!1)}catch(S){console.log(S)}};return D(!1),(S,v)=>{const F=we,a=oe("RouterView"),t=ke("can");return i(),h("section",null,[_.isCustomerSelection?T("",!0):(i(),h("div",jt,[l("div",Mt,[n(F,{color:e(he),class:"w-[20px] h-[20px] m-auto"},null,8,["color"])]),Ot])),l("div",Rt,[Y(n(Bt,{currentCustomer:e(s).create?null:e(u),isLoading:e(k).list,isShowMore:e(m),metaObj:e($),customers:e(E),onCallSelectCurrentCustomer:M,onCallNextPage:U,onCallSearchCustomers:e(o),onCallResetFilter:j},null,8,["currentCustomer","isLoading","isShowMore","metaObj","customers","onCallSearchCustomers"]),[[t,"view-customer"]]),l("div",It,[n(a,null,{default:r(()=>[(i(),g(xe,{timeout:0,onFallback:v[5]||(v[5]=f=>V.value=!0),onResolve:v[6]||(v[6]=f=>V.value=!1)},{default:r(()=>[n(R,null,{default:r(()=>[n(Ae,{class:"py-2"},Ce({default:r(()=>[e(u)&&!_.isCustomerSelection?(i(),g(te,{key:0,style:{"margin-top":"28px"}},{default:r(()=>[L(p(e(s).edit?"Edit":"")+" Customer",1)]),_:1})):!e(u)&&!_.isCustomerSelection?(i(),g(te,{key:1,style:{"margin-top":"28px"}},{default:r(()=>[L(p(e(s).create?"Add":"")+" Customer",1)]),_:1})):e(u)&&_.isCustomerSelection?(i(),g(te,{key:2,style:{"margin-top":"28px"}},{default:r(()=>[L("Details")]),_:1})):T("",!0)]),_:2},[!_.isCustomerSelection&&e(u)?{name:"append",fn:r(()=>[l("div",Ht,[e(u)?Y((i(),g(z,{key:0,onClick:v[0]||(v[0]=f=>I()),type:"button",color:"danger",class:"text-white"},{default:r(()=>[L(" Delete ")]),_:1})),[[t,"delete-customer"]]):T("",!0),L("     "),Y((i(),g(z,{onClick:v[1]||(v[1]=f=>J())},{default:r(()=>[Kt]),_:1})),[[t,"create-customer"]])])]),key:"0"}:void 0]),1024),qt,e(s).edit&&e(u)?(i(),g(Q,{key:0,class:"ma-0 mt-n1"},{default:r(()=>[n(B,{cols:"12",class:"border-t pa-4 shortcut-icon"},{default:r(()=>[n(me,{idToEdit:e(u).id,preview:e(s).edit,onUpdatePreview:O,onGetList:v[2]||(v[2]=f=>D(!1))},null,8,["idToEdit","preview"])]),_:1})]),_:1})):e(s).create?(i(),g(Q,{key:1,style:{height:"550px !important"},class:"ma-0 mt-n1"},{default:r(()=>[n(B,{cols:"12",class:"border-t pa-4 shortcut-icon"},{default:r(()=>[n(me,{idToEdit:0,preview:e(s).create,onUpdatePreview:O,onGetList:v[3]||(v[3]=f=>D(!1))},null,8,["preview"])]),_:1})]),_:1})):e(u)&&!e(s).edit&&!e(s).create&&_.isCustomerSelection?(i(),g(Q,{key:2,class:"ma-0 mt-n1"},{default:r(()=>[n(B,{cols:"12",class:"border-t pa-4 shortcut-icon"},{default:r(()=>{var f,b,C,H,K,d,ae,ie,ne,de,re;return[Wt,Qt,l("div",Zt,[l("div",Gt,[Jt,l("span",null,p(e(u).first_name??"N/A"),1)]),l("div",Xt,[Yt,l("span",null,p(e(u).last_name??"N/A"),1)]),l("div",es,[ts,l("span",null,p(e(u).email??"N/A"),1)]),l("div",ss,[ls,l("span",null,p(e(u).phone??"N/A"),1)]),l("div",os,[as,l("span",null,p(e(u).birthday??"N/A"),1)])]),is,n(De),ns,ds,l("div",rs,[l("div",us,[cs,l("span",null,p(((b=(f=e(u))==null?void 0:f.address)==null?void 0:b.address_line_1)??"N/A"),1)]),l("div",ms,[fs,l("span",null,p(((H=(C=e(u))==null?void 0:C.address)==null?void 0:H.address_line_2)??"N/A"),1)]),l("div",ps,[_s,l("span",null,p(((d=(K=e(u))==null?void 0:K.address)==null?void 0:d.city)??"N/A"),1)]),l("div",vs,[hs,l("span",null,p(((ie=(ae=e(u))==null?void 0:ae.address)==null?void 0:ie.zip_code)??"N/A"),1)]),l("div",gs,[ys,l("span",null,p(((re=(de=(ne=e(u))==null?void 0:ne.address)==null?void 0:de.state)==null?void 0:re.name)??"N/A"),1)])])]}),_:1}),_.isCustomerSelection?(i(),g(B,{key:0,cols:"12",class:"d-flex gap-4"},{default:r(()=>[n(z,{class:"text-white",onClick:v[4]||(v[4]=f=>S.$emit("callSaveSelection",e(u)))},{default:r(()=>[bs]),_:1})]),_:1})):T("",!0)]),_:1})):T("",!0)]),_:1})]),_:1}))]),_:1})])]),n(e(ze),{isAdmin:!1,preview:e(s).delete,itemName:"Customer",deleteFn:X,isDeleting:e(k).deleting,isDialogVisible:e(s).delete,"onUpdate:isDialogVisible":v[7]||(v[7]=f=>e(s).delete=f)},null,8,["preview","isDeleting","isDialogVisible"])])}}});export{Bs as _};
