import{d as Y,cP as D,J as ee,r as m,w as E,o as t,c as a,e as o,b as r,f,Q as b,k as l,h as L,F as V,z as C,Z as te,y as R,V as I,bq as se,R as d,cU as B,cZ as M,M as T,cR as ae}from"./index-ab2bc521.js";import{_ as oe}from"./Pen.vue_vue_type_script_setup_true_lang-e939210f.js";import{_ as O}from"./Pagination.vue_vue_type_script_setup_true_lang-6d9bdbde.js";import{_ as U}from"./Lucide.vue_vue_type_script_setup_true_lang-5dcb49e0.js";import{_ as le}from"./LoadingIcon.vue_vue_type_script_setup_true_lang-2352b216.js";import{V as ne,a as W}from"./VTabs-036eabe8.js";import{V as Z}from"./VCardText-6d82c75f.js";import{b as q,V as ie}from"./VWindowItem-181509cc.js";import{V as G}from"./VTooltip-1a5a6ea6.js";import"./forwardRefs-6ea3df5c.js";import"./createSimpleFunctional-c52b7322.js";import"./VOverlay-39b4b039.js";import"./transition-99e7ac04.js";import"./ssrBoot-93503f06.js";const ce={class:"grid",style:{"margin-top":"-17px"}},de={key:0,class:"flex p-4"},re={key:0,class:"flex flex-col gap-4"},ue={class:"flex flex-col justify-between h-full"},pe={class:"font-medium text-base"},me={class:"text-slate-400 text-xs"},fe={class:"h-fit my-auto flex items-center gap-4"},_e={class:"text-xs text-slate-400 flex items-center gap-1"},ge={class:"text-primary bg-secondary p-1 rounded"},ve={class:"flex gap-2"},ye=["onClick"],he=["onClick"],xe={key:1,class:"text-slate-400"},be={key:0,class:"flex flex-col gap-4"},ke={class:"flex flex-col justify-between h-full"},we={class:"font-medium text-base"},Ve={class:"text-slate-400 text-xs"},Ce={class:"dots cursor-pointer",variant:"outlined"},Ie={key:0},Te={key:1},Pe={key:0},Fe={class:"h-fit my-auto flex items-center gap-4"},$e={class:"text-xs text-slate-400 flex items-center gap-1"},Se={class:"text-primary bg-secondary p-1 rounded"},Ee={class:"flex gap-2"},Le=["onClick"],je=["onClick"],ze={key:1,class:"text-slate-400"},Xe=Y({__name:"index",setup(Ne){const c=D(),P=ee("api"),_=m(!1),F=m({}),$=m({}),v=m([]),y=m([]),k=m(1),J=m(5),w=m(1),Q=m(5),A=m("asc"),H=m("asc"),u=m("cart"),K="PPS-POS";document.title=K+" | Inventory-Discounts";const X=async()=>{c.setIsDeleting(!0);try{await P.inventory.discount.deleteDiscount(c.getIDToEdit)!==void 0&&(ae.fire({icon:"success",padding:"10px",background:"#fff",html:'<span class="text-sm">Discoun Deleted Successfully!</span>'}),c.setIsDeletePopupVisible(!1),u.value=="cart"&&(v.value.length==1&&k.value--,h()),u.value=="item"&&(y.value.length==1&&w.value--,x()))}catch(s){console.log(s)}c.setIsDeleting(!1)},j=s=>{c.setIDToEdit(s),c.setIsPopupVisible(!0)},z=s=>{c.setIDToEdit(s),c.setIsDeletePopupVisible(!0)},N=s=>{c.setDiscountType(s),u.value=s},h=async()=>{var s,i;_.value=!0;try{const p=c.getSearchValue;p!=""&&(k.value=1);const n=await P.inventory.discount.getCardDiscounts({search:p,page:k.value,limit:J.value,sorting:H.value});v.value=await((s=n==null?void 0:n.data)==null?void 0:s.data),F.value=await((i=n==null?void 0:n.data)==null?void 0:i.meta)}catch(p){console.log(p)}_.value=!1},x=async()=>{var s,i;_.value=!0;try{const p=c.getSearchValue;p!=""&&(w.value=1);const n=await P.inventory.discount.getItemDiscounts({search:p,page:w.value,limit:Q.value,sorting:A.value});y.value=await((s=n==null?void 0:n.data)==null?void 0:s.data),$.value=await((i=n==null?void 0:n.data)==null?void 0:i.meta)}catch(p){console.log(p)}_.value=!1};return h(),x(),c.setDiscountType("cart"),E(()=>c.getSearchValue,()=>{u.value=="cart"?(h(),u.value="cart"):u.value=="item"&&(x(),u.value="item")}),E(()=>c.getIsGetData,()=>{h(),x()}),E(()=>c.getIsDeleteRecord,()=>{X()}),(s,i)=>{const p=oe,n=se("can");return t(),a("section",null,[o("div",ce,[r(Z,{class:"d-flex flex-column gap-2"},{default:f(()=>[o("div",null,[r(ne,{class:"v-tabs-pill px-6 py-4","fixed-tabs":""},{default:f(()=>[r(W,{class:"rounded-lg shadow bg-[#f8f7fa] dark:bg-darkmode-bg",onClick:i[0]||(i[0]=e=>N("cart"))},{default:f(()=>[b("Inventory")]),_:1}),b("    "),r(W,{class:"rounded-lg shadow bg-[#f8f7fa] dark:bg-darkmode-bg",onClick:i[1]||(i[1]=e=>N("item"))},{default:f(()=>[b("Item")]),_:1})]),_:1})])]),_:1}),r(Z,null,{default:f(()=>[l(_)?(t(),a("div",de,[r(l(le),{icon:"tail-spin",color:"orange",class:"w-8 h-8 m-auto"})])):(t(),L(ie,{key:1,style:{"margin-top":"-10px"},class:"ms-3",modelValue:l(u),"onUpdate:modelValue":i[2]||(i[2]=e=>te(u)?u.value=e:null)},{default:f(()=>[r(q,{value:"cart"},{default:f(()=>[l(v).length?(t(),a("div",re,[(t(!0),a(V,null,C(l(v),e=>(t(),a("div",{class:"px-4 py-2 flex justify-between items-center gap-4 bg-white border rounded",key:e.id},[o("div",ue,[o("h3",pe,d(e.name),1),o("span",me,d(e.use_mode),1)]),o("div",fe,[o("div",_e,[o("span",null,d(e.type==="amount"?"$":"")+" "+d(("makeFLoat"in s?s.makeFLoat:l(B))(e.amount,e.type))+" "+d(e.type==="percentage"?"%":""),1),o("span",ge,d(("capitalize"in s?s.capitalize:l(M))(e.group)),1)]),o("div",ve,[T((t(),a("button",{type:"button",class:"bg-[#E9F5FE] rounded-sm",onClick:g=>j(e.id)},[r(p)],8,ye)),[[n,"edit-discount"]]),T((t(),a("button",{type:"button",class:"p-1 bg-danger rounded-sm",onClick:g=>z(e.id)},[r(U,{icon:"Trash2",class:"w-4 h-4 text-white"})],8,he)),[[n,"delete-discount"]])])])]))),128))])):(t(),a("div",xe,"No Records Found!"))]),_:1}),r(q,{value:"item"},{default:f(()=>[l(y).length?(t(),a("div",be,[(t(!0),a(V,null,C(l(y),e=>(t(),a("div",{class:"px-4 py-2 flex justify-between items-center gap-4 bg-white border rounded",key:e.id},[o("div",ke,[o("h3",we,d(e.name),1),o("span",Ve,[b(d(e.use_mode)+" | ",1),o("span",Ce,[b(d((e==null?void 0:e.products_count)||0)+" Items ",1),(e==null?void 0:e.products_count)>0&&e.products.length>5?(t(),L(G,{key:0,"open-delay":"500",location:"top",activator:"parent"},{default:f(()=>[(t(!0),a(V,null,C(e.products.slice(0,5),(g,S)=>(t(),a("span",null,[o("span",null,d(g.name),1),S!=Object.keys(e.products.slice(0,5)).length-1?(t(),a("span",Ie,", ")):(t(),a("span",Te,", ...."))]))),256))]),_:2},1024)):(e==null?void 0:e.products_count)>0&&e.products.length<=5?(t(),L(G,{key:1,"open-delay":"500",location:"top",activator:"parent"},{default:f(()=>[(t(!0),a(V,null,C(e.products,(g,S)=>(t(),a("span",null,[o("span",null,d(g.name),1),S!=Object.keys(e.products).length-1?(t(),a("span",Pe,", ")):I("",!0)]))),256))]),_:2},1024)):I("",!0)])])]),o("div",Fe,[o("div",$e,[o("span",null,d(e.type==="amount"?"$":"")+" "+d(("makeFLoat"in s?s.makeFLoat:l(B))(e.amount,e.type))+" "+d(e.type==="percentage"?"%":""),1),o("span",Se,d(("capitalize"in s?s.capitalize:l(M))(e.group)),1)]),o("div",Ee,[T((t(),a("button",{type:"button",class:"bg-[#E9F5FE] rounded-sm",onClick:g=>j(e.id)},[r(p)],8,Le)),[[n,"edit-discount"]]),T((t(),a("button",{type:"button",class:"p-1 bg-danger rounded-sm",onClick:g=>z(e.id)},[r(U,{icon:"Trash2",class:"w-4 h-4 text-white"})],8,je)),[[n,"delete-discount"]])])])]))),128))])):(t(),a("div",ze,"No Records Found!"))]),_:1})]),_:1},8,["modelValue"]))]),_:1})]),l(u)=="cart"&&l(F)&&l(v).length?(t(),a("div",{key:0,class:R(["mt-8 flex m-auto",{"opacity-0":l(_)}]),style:{"margin-left":"15px"}},[r(O,{onPageChanged:i[3]||(i[3]=e=>{k.value=e,h()}),meta:l(F),class:"w-full sm:w-auto sm:mr-auto"},null,8,["meta"])],2)):I("",!0),l(u)=="item"&&l($)&&l(y).length?(t(),a("div",{key:1,class:R(["mt-8 flex m-auto",{"opacity-0":l(_)}]),style:{"margin-left":"15px"}},[r(O,{onPageChanged:i[4]||(i[4]=e=>{w.value=e,x()}),meta:l($),class:"w-full sm:w-auto sm:mr-auto"},null,8,["meta"])],2)):I("",!0)])}}});export{Xe as default};
