import{_ as P}from"./Pagination.vue_vue_type_script_setup_true_lang-6d9bdbde.js";import{d as y,db as V,c_ as k,J as b,bm as w,r as u,w as f,o as r,c as d,e as x,k as s,b as _,h as R,y as T,V as E,cR as L}from"./index-ab2bc521.js";import{_ as B}from"./LoadingIcon.vue_vue_type_script_setup_true_lang-2352b216.js";import{_ as N}from"./List.vue_vue_type_script_setup_true_lang-77337165.js";import"./Lucide.vue_vue_type_script_setup_true_lang-5dcb49e0.js";import"./VAvatar-b89a8ade.js";import"./VImg-7ee89f5e.js";import"./transition-99e7ac04.js";import"./VSpacer-b5948b9a.js";import"./createSimpleFunctional-c52b7322.js";const S={class:"grid"},O={key:0,class:"flex"},$={key:2,class:"text-slate-400"},U=y({__name:"index",setup(M){V("Roles");const e=k(),g=b("api"),l=w({list:!1,deleting:!1}),m=u({}),i=u([]),p=u(1),D=u(6),h=async()=>{e.setIsDeleting(!0);try{await g.roles.deleteRole(e.getIDToEdit)!==void 0&&(L.fire({icon:"success",padding:"10px",background:"#fff",html:'<span class="text-sm">Role Deleted Successfully!</span>'}),e.setIsDeletePopupVisible(!1),i.value.length==1&&p.value--,n())}catch(t){console.log(t),e.setIDToEdit(0),e.setIsDeletePopupVisible(!1)}e.setIsDeleting(!1)},I=t=>{e.setIDToEdit(t),e.setIDToClone(0),e.setIsPopupVisible(!0)},v=t=>{e.setIDToEdit(t),e.setIDToClone(t),e.setIsPopupVisible(!0)},C=t=>{e.setIDToEdit(t),e.setIsDeletePopupVisible(!0)},n=async()=>{var t,c;l.list=!0;try{const o=e.getSearchValue;o!=""&&(p.value=1);const a=await g.roles.getRolesList({search:o,page:p.value,limit:D.value});i.value=await((t=a==null?void 0:a.data)==null?void 0:t.data),m.value=await((c=a==null?void 0:a.data)==null?void 0:c.meta)}catch(o){console.log(o)}l.list=!1};return n(),f(()=>e.getSearchValue,()=>{n()}),f(()=>e.getIsGetData,()=>{n()}),f(()=>e.getIsDeleteRecord,()=>{h()}),(t,c)=>(r(),d("section",null,[x("div",S,[s(l).list?(r(),d("div",O,[_(s(B),{icon:"tail-spin",color:"orange",class:"w-6 h-6 mx-auto"})])):s(i).length?(r(),R(N,{key:1,isLoading:s(l).list,roles:s(i),onCallOnDeleteClick:C,onCallOpenEditPopup:I,onCallOpenClonePopup:v,isMerchant:!0},null,8,["isLoading","roles"])):(r(),d("div",$,"No Records Found!"))]),s(m)&&s(i).length?(r(),d("div",{key:0,class:T(["mt-8 flex m-auto",{"opacity-0":s(l).list}])},[_(P,{onPageChanged:c[0]||(c[0]=o=>{p.value=o,n()}),meta:s(m),class:"w-full sm:w-auto sm:mr-auto"},null,8,["meta"])],2)):E("",!0)]))}});export{U as default};
