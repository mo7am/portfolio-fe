import{_ as K}from"./Pagination.vue_vue_type_script_setup_true_lang-6d9bdbde.js";import{_ as O}from"./DeletePopup.vue_vue_type_script_setup_true_lang-8649cda4.js";import{d as M,J as q,r as A,bm as D,H as X,cS as H,o as s,c as n,k as e,b as o,e as c,M as T,h as b,f as i,a0 as L,Q as z,ci as Y,F as I,z as Z,R as $,V as B,y as ee,cR as J,a as j,bq as te,db as se}from"./index-ab2bc521.js";import{_ as oe}from"./List.vue_vue_type_script_setup_true_lang-77337165.js";import{_ as ae}from"./AppTextField.vue_vue_type_style_index_0_lang-ff2427f7.js";import{_ as le}from"./LoadingIcon.vue_vue_type_script_setup_true_lang-2352b216.js";import{V as E}from"./VAvatar-b89a8ade.js";import{V as F}from"./VTooltip-1a5a6ea6.js";import{V as ie}from"./VDataTableServer-3c5957d4.js";import"./Lucide.vue_vue_type_script_setup_true_lang-5dcb49e0.js";import"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-01c6a1ae.js";import"./VCard-c9d7cfad.js";import"./createSimpleFunctional-c52b7322.js";import"./VCardText-6d82c75f.js";import"./VImg-7ee89f5e.js";import"./transition-99e7ac04.js";import"./VDialog-4ab52581.js";import"./VOverlay-39b4b039.js";import"./forwardRefs-6ea3df5c.js";import"./dialog-transition-6ea18c7a.js";import"./VSpacer-b5948b9a.js";import"./VTextField-bc742ce7.js";import"./VDataTable-1136d52c.js";import"./VSelect-9cc3df93.js";import"./VList-6df8630b.js";import"./VListItem-93d403d9.js";import"./ssrBoot-93503f06.js";import"./VDivider-b868c04b.js";import"./VMenu-6ec9b18a.js";import"./VCheckboxBtn-023236ba.js";import"./VSelectionControl-e6ec7db0.js";const ne={key:0,class:"p-4 flex"},re={key:1,class:"flex flex-col gap-4"},ce={class:"flex flex-wrap gap-4 justify-between"},de={key:0,class:"flex"},pe={class:"v-avatar-group"},me={key:1},ue={key:0,class:"flex items-center gap-4"},fe={key:1},_e=c("span",null,"Edit Role",-1),ge=c("span",null,"Delete Role",-1),ve=c("span",null,"Clone Role",-1),he={key:0,class:"mt-4 flex"},ye=M({__name:"AdminRolesList",props:{isMerchant:{type:Boolean,default:!1}},setup(C){const y=q("api"),m=A([]),x=A({}),a=D({list:!1,deleting:!1}),V=X(),R=[{title:"Name",key:"name",sortable:!0},{title:"Users",key:"users",sortable:!0},{title:"Total Users",key:"total_users",sortable:!0},{title:"Actions",key:"actions",sortable:!1}],u=C,f=D({search:"",page:1,limit:6}),d=D({preview:!1,id:0}),k=async()=>{var _,l;a.list=!0;try{let p=null;u.isMerchant?p=await y.roles.getRolesList(f):p=await y.admin.roles.getRolesList(f),m.value=await((_=p==null?void 0:p.data)==null?void 0:_.data),x.value=await((l=p==null?void 0:p.data)==null?void 0:l.meta)}catch(p){console.log(p)}a.list=!1},N=()=>{d.id=0,d.preview=!1},v=_=>{d.id=_,d.preview=!0},h=async()=>{a.deleting=!0;try{u.isMerchant?await y.roles.deleteRole(d.id):await y.admin.roles.deleteRole(d.id),J.fire({icon:"success",padding:"10px",background:"#fff",html:'<span style="font-size:14px">Role Deleted Successfully!</span>'}),N(),k()}catch(_){console.log(_)}a.deleting=!1},r=_=>{const l=_.split(" ");return l.length>1?l[0][0]+" "+l[1][0]:l[0][0]},Q=H(()=>{f.page=1,k()},600),P=_=>{V.setIDToClone(_)};return k(),(_,l)=>{const p=ae,U=j("RouterLink"),G=j("IconBtn"),S=te("can");return s(),n("section",null,[e(a).list&&!e(m).length?(s(),n("div",ne,[o(e(le),{icon:"tail-spin",class:"w-6 h-6 m-auto",color:"black"})])):(s(),n("div",re,[c("div",ce,[c("div",null,[o(p,{type:"text",modelValue:e(f).search,"onUpdate:modelValue":l[0]||(l[0]=t=>e(f).search=t),label:"Search",placeholder:"Type here...",class:"w-[200px] sm:w-[250px]",onKeyup:e(Q)},null,8,["modelValue","onKeyup"])]),T((s(),b(Y,{primary:"",color:"black ",class:"text-white mt-auto"},{default:i(()=>[o(U,{class:"flex items-center",to:{name:"admin-roles-add"}},{default:i(()=>[o(L,{size:"20",icon:"tabler-plus",class:"mr-1"}),z(" Add New Role ")]),_:1})]),_:1})),[[S,"create-roles"]])]),c("div",null,[o(e(ie),{items:e(m),itemsLength:e(m).length,headers:R,class:ee(["text-no-wrap",{"opacity-70":e(a).list&&e(m).length}])},{"item.users":i(({item:t})=>{var w;return[(w=t==null?void 0:t.users)!=null&&w.length?(s(),n("div",de,[c("div",pe,[(s(!0),n(I,null,Z(t==null?void 0:t.users,(g,W)=>(s(),n(I,{key:g},[W<=3?(s(),b(E,{key:0,color:"primary",size:"36",class:"uppercase cursor-pointer mr-2",image:g!=null&&g.avatar?g==null?void 0:g.avatar:void 0},{default:i(()=>[z($(r(g==null?void 0:g.name)),1)]),_:2},1032,["image"])):B("",!0)],64))),128)),t.users.length>4?(s(),b(E,{key:0,color:"#4A5072"},{default:i(()=>[c("span",null," +"+$(t.users.length-4),1)]),_:2},1024)):B("",!0)])])):(s(),n("div",me,"No Users available!"))]}),"item.name":i(({item:t})=>[c("div",null,$((t==null?void 0:t.name)||"N/A"),1)]),"item.total_users":i(({item:t})=>{var w;return[(w=t==null?void 0:t.users)!=null&&w.length?(s(),n("div",ue,[c("p",null,$(t.users.length)+" Users",1)])):(s(),n("div",fe,"0 Users"))]}),"item.actions":i(({item:t})=>[T((s(),b(U,{onClick:l[1]||(l[1]=w=>P(0)),to:`/admin/roles/edit/${t.id}`},{default:i(()=>[o(L,{icon:"tabler-edit"}),o(F,{"open-delay":"500",location:"top",activator:"parent"},{default:i(()=>[_e]),_:1})]),_:2},1032,["to"])),[[S,"edit-roles"]]),T((s(),b(G,{onClick:w=>v(t.id)},{default:i(()=>[o(L,{icon:"tabler-trash",class:"text-danger"}),o(F,{"open-delay":"500",location:"top",activator:"parent"},{default:i(()=>[ge]),_:1})]),_:2},1032,["onClick"])),[[S,"delete-roles"]]),o(U,{onClick:w=>P(t.id),to:"/admin/roles/add"},{default:i(()=>[o(L,{icon:"tabler-copy"}),o(F,{"open-delay":"500",location:"top",activator:"parent"},{default:i(()=>[ve]),_:1})]),_:2},1032,["onClick"])]),bottom:i(()=>[]),_:1},8,["items","itemsLength","class"]),e(x)?(s(),n("div",he,[o(K,{onPageChanged:l[2]||(l[2]=t=>{e(f).page=t,k()}),meta:e(x),class:"w-full sm:w-auto sm:mr-auto"},null,8,["meta"])])):B("",!0)])])),o(e(O),{isAdmin:!0,preview:e(d).preview,itemName:"Role",deleteFn:h,isDeleting:e(a).deleting,isDialogVisible:e(d).preview,"onUpdate:isDialogVisible":l[3]||(l[3]=t=>e(d).preview=t)},null,8,["preview","isDeleting","isDialogVisible"])])}}}),we={key:0,class:"flex p-4"},xe={key:1},ke={key:2,class:"mt-4 flex m-auto"},be=M({__name:"RolesList",props:{isMerchant:{type:Boolean,default:!1}},setup(C){const y=q("api"),m=A([]),x=A({}),a=D({list:!1,deleting:!1}),V=C,R=D({search:"",page:1,limit:6}),u=D({preview:!1,id:0}),f=async()=>{var v,h;a.list=!0;try{const r=await y.admin.roles.getRolesList(R);m.value=await((v=r==null?void 0:r.data)==null?void 0:v.data),x.value=await((h=r==null?void 0:r.data)==null?void 0:h.meta)}catch(r){console.log(r)}a.list=!1},d=()=>{u.id=0,u.preview=!1},k=v=>{u.id=v,u.preview=!0},N=async()=>{a.deleting=!0;try{await y.admin.roles.deleteRole(u.id),J.fire({icon:"success",padding:"10px",background:"#fff",html:'<span style="font-size:14px">Role Deleted Successfully!</span>'}),d(),f()}catch(v){console.log(v),d()}a.deleting=!1};return H(()=>{R.page=1,f()},600),f(),(v,h)=>(s(),n("div",null,[e(a).list&&!e(m).length?(s(),n("div",we," Loading... ")):(s(),n("div",xe,[V.isMerchant?(s(),b(oe,{key:0,isLoading:e(a).list,roles:e(m),onCallOnDeleteClick:k},null,8,["isLoading","roles"])):(s(),b(ye,{key:1,isLoading:e(a).list,roles:e(m),onCallOnDeleteClick:k},null,8,["isLoading","roles"])),e(x)&&V.isMerchant?(s(),n("div",ke,[o(K,{onPageChanged:h[0]||(h[0]=r=>{e(R).page=r,f()}),meta:e(x),class:"w-full sm:w-auto sm:mr-auto"},null,8,["meta"])])):B("",!0)])),o(e(O),{isAdmin:!0,preview:e(u).preview,itemName:"Role",deleteFn:N,isDeleting:e(a).deleting,isDialogVisible:e(u).preview,"onUpdate:isDialogVisible":h[1]||(h[1]=r=>e(u).preview=r)},null,8,["preview","isDeleting","isDialogVisible"])]))}}),De={class:"flex flex-col gap-4"},Re=c("div",{class:"flex flex-col gap-4"},[c("h1",{class:"text-xl font-medium text-[#2F2B3DC7]"},"Roles List"),c("p",{class:"max-w-[600px] text-[#2F2B3DC7]"}," A role provided access to predefined modules and features so that depending on assigned role an administrator can have access to what he need ")],-1),ot=M({__name:"index",setup(C){return se("Roles"),(y,m)=>(s(),n("section",De,[Re,c("div",null,[o(be)])]))}});export{ot as default};
